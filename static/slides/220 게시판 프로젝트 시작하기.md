---
marp: true
theme: gaia
_class: lead
footer: QCN
paginate: true
backgroundColor: #fff
---

<style>
:root {
  font-family: Pretendard;
  --border-color: #303030;
  --text-color: #0a0a0a;
  --bg-color-alt: #dadada;
  --mark-background: #ffef92;
}

h1 {
  border-bottom: none;
  font-size: 1.6em;
}

h2 {
  border-bottom: none;
  font-size: 1.3em;
}

h3 {
  font-size: 1.1em;
}

h4 {
  font-size: 1.05em;
}

h5 {
  font-size: 1em;
}

h6 {
  font-size: 0.9em;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  color: var(--text-color);
}

code:not([class*="language-"]) {
  font-family: D2Coding;
  color: #000;
  vertical-align: text-bottom;
  background-color: rgba(100, 100, 100, 0.2);
}

section {
  background-image: linear-gradient(to bottom right, #f7f7f7 0%, #d3d3d3 100%);
}

section table {
    margin: auto;
    font-size: 28px;
}

section::after {
  font-size: 0.75em;
  content: attr(data-marpit-pagination) " / " attr(data-marpit-pagination-total);
}

img[alt~="center"] {
  display: block;
  margin: 0 auto;
}

blockquote {
  font-size: 26px;
  border-left: 8px solid var(--border-color);
  background: var(--bg-color-alt);
  margin: 0.5em;
  padding: 0.5em;
}

blockquote::before,
blockquote::after {
    content: '';
}

mark {
  background-color: var(--mark-background);
  padding: 0 2px 2px;
  border-radius: 4px;
  margin: 0 2px;
}

section.tinytext>p,
section.tinytext>ul,
section.tinytext>blockquote {
  font-size: 0.65em;
}
</style>

# 게시판 프로젝트 시작하기

### HandStack으로 배우는 웹 개발의 모든 것

---

## 왜 "게시판"으로 시작할까요?

게시판은 웹 개발의 핵심 요소를 모두 담고 있는 최고의 연습 문제입니다.

- **웹 페이지 화면 구성**
  - 목록, 등록, 상세 화면 등 다양한 UI 레이아웃을 경험합니다.

- **서버 데이터 통신**
  - 사용자의 요청(글쓰기, 조회)을 서버로 보내고 응답을 처리하는 과정을 배웁니다.

- **데이터베이스 처리 (CRUD)**
  - 게시글을 <mark>만들고(Create)</mark>, <mark>읽고(Read)</mark>, <mark>수정하고(Update)</mark>, <mark>삭제하는(Delete)</mark> 기본을 익힙니다.

---

## 프로젝트 설계: 생각 정리하기

코딩 전에 무엇을 만들지 먼저 정리하는 것이 중요합니다.

- **사용자 스토리**: "개발자인 내가 사용할 간단한 게시판을 만들자!"
- **주요 기능**
  - 글 목록 조회 (검색, 정렬 기능 포함)
  - 새 글 등록 (서식이 있는 편집기 사용)
  - 기존 글 수정 및 삭제

- **화면 분류**
  - `BOD010`: 게시글 목록
  - `BOD011`: 신규 게시글 등록 (팝업)
  - `BOD012`: 게시글 편집 및 삭제 (팝업)

---

## HandStack의 계약 기반 개발

HandStack은 정해진 약속(Contracts)에 따라 소스를 체계적으로 관리합니다.
하나의 기능은 보통 3개의 파일로 구성됩니다.

```
contracts/
├─ dbclient/   - 데이터베이스 SQL 관리 (XML)
│  └─ HDS/BOD/BOD012.xml
├─ transact/   - API 요청/응답 규칙 정의 (JSON)
│  └─ HDS/BOD/BOD012.json
└─ wwwroot/    - 화면 UI (HTML, JS)
   └─ BOD/BOD012.html, BOD012.js
```
- <mark>규칙적인 구조</mark> 덕분에 코드를 찾기 쉽고 유지보수 비용이 절감됩니다.

---

## 1단계: 데이터베이스 준비 (with AI)

게시판에 필요한 데이터 테이블은 생성형 AI(Copilot)의 도움을 받아 쉽게 만들 수 있습니다.

> SQLite 기준으로 간단한 분류 게시판 테이블을 만들어줘.

```sql
-- AI가 제안한 DDL을 기반으로 만든 테이블
CREATE TABLE IF NOT EXISTS Board (
  ID INTEGER PRIMARY KEY AUTOINCREMENT, -- 고유 번호
  Category TEXT,                      -- 분류
  Title TEXT,                         -- 제목
  Content TEXT,                       -- 내용
  Author TEXT,                        -- 작성자
  DatePosted TEXT                     -- 작성일
);
```

- HandStack에서는 이 SQL을 `dbclient` 폴더의 XML 파일 안에 정의하여 관리합니다.

---

## 2단계: 삭제 기능 구현하기 (`dbclient`)

`BOD012.xml` 파일에 게시글을 삭제하는 SQL문을 정의합니다.

- **기능 ID**: `DD01` (Delete + Database의 약자)
- **역할**: 특정 ID의 게시글을 `Board` 테이블에서 삭제합니다.

```xml
<!-- contracts/dbclient/HDS/BOD/BOD012.xml -->
<statement id="DD01" desc="게시글 삭제">
    <![CDATA[
        DELETE FROM Board
        WHERE ID = @ID;
    ]]>
    <param id="@ID" type="String" />
</statement>
```

---

## 3단계: 삭제 API 정의하기 (`transact`)

`BOD012.json` 파일에 `DD01` 기능을 호출할 API 규칙을 정의합니다.

- **역할**: 클라이언트(웹 브라우저)로부터 `DD01` 요청을 받았을 때 어떻게 처리할지 명시합니다.

```json
// contracts/transact/HDS/BOD/BOD012.json
{
    "TransactionID": "BOD012",
    "Services": [
        {
            "ServiceID": "DD01", // dbclient의 DD01 기능과 연결
            "CommandType": "D",
            "Inputs": [ { "Type": "Row" } ],
            "Outputs": []
        }
    ]
}
```

---

## 4단계: UI에 삭제 기능 연결하기 (`wwwroot`)

이제 사용자가 누를 수 있는 삭제 버튼과 그 동작을 `BOD012.js`에 만듭니다.

- **핵심**: 삭제는 되돌리기 어려운 중요한 작업입니다. 반드시 사용자에게 재확인하는 절차를 거쳐야 합니다.

> 데이터 삭제는 매우 중요한 작업이니, 실수로 지우는 일이 없도록 항상 사용자에게 '정말 지우실 건가요?'라고 물어보는 습관을 들이는 것이 좋습니다.

```javascript
// BOD012.js 의 삭제 버튼 이벤트 핸들러
event: {
    btnDelete_click() {
        // 1. 사용자에게 정말 삭제할 것인지 물어봅니다.
        syn.$w.alert('정말로 이 게시글을 삭제하시겠습니까?', '삭제 확인', ..., (result) => {
            if (result == 'Yes') {
                // 2. 사용자가 'Yes'를 누르면, 정의해둔 'DD01' 거래를 실행합니다.
                syn.$w.transactionAction('DD01');
            }
        });
    }
}
```

---

## 완성된 게시판 화면 미리보기

- 목록 조회 (BOD010)
![center width:1000px](https://raw.githubusercontent.com/handstack77/handstack-docs/master/docs/startup/handsonlab/img/BOD010.png)

---

## 완성된 게시판 화면 미리보기

- 신규 등록 (BOD011) / 편집 (BOD012)
![center width:1000px](https://raw.githubusercontent.com/handstack77/handstack-docs/master/docs/startup/handsonlab/img/BOD011.png)

---

<!-- _class: lead -->

# Hands-On
## 지금 바로 여러분의 PC에서 게시판 데모를 실행해 보세요!

---

## 데모 실행 방법

1. **사전 준비**: .NET 8.0 이상, Node.js 20 이상 버전이 설치되어 있어야 합니다.
   - 설치 방법은 [빠른 시작](https://handstack.kr/docs/startup/빠른-시작) 문서를 참고하세요.

2. **HandStack 다운로드**
   - [최신 HandStack Releases](https://github.com/handstack77/handstack/releases)에서 운영체제에 맞는 파일을 받아 압축을 해제합니다.

3. **데모 서버 실행**
   - 압축 해제한 폴더의 `handstack/app`으로 이동하여 `ack` 파일을 실행합니다.

4. **웹 브라우저에서 확인**
   - 주소창에 `http://localhost:8421/view/BOD/BOD010.html`을 입력하세요.
   - <mark>첫 실행 시 테이블이 없다는 오류가 발생합니다.</mark> 화면의 '게시판 Board 테이블 초기화' 버튼을 눌러주세요