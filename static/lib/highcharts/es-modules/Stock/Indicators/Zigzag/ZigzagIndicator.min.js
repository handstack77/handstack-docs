"use strict";import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";const SMAIndicator=SeriesRegistry.seriesTypes["sma"];import U from"../../../Core/Utilities.js";const{merge,extend}=U;class ZigzagIndicator extends SMAIndicator{getValues(e,i){const t=i.lowIndex,s=i.highIndex,a=i.deviation/100,r=1+a,o=1-a,n=e.xData,d=e.yData,g=d?d.length:0,p=[],u=[],h=[];let c,l,m,x,I=!1,f=!1;if(!(!n||n.length<=1||g&&(void 0===d[0][t]||void 0===d[0][s]))){var S=d[0][t],v=d[0][s];for(c=1;c<g;c++)d[c][t]<=v*o?(p.push([n[0],v]),m=[n[c],d[c][t]],x=!0,I=!0):d[c][s]>=S*r&&(p.push([n[0],S]),m=[n[c],d[c][s]],x=!1,I=!0),I&&(u.push(p[0][0]),h.push(p[0][1]),l=c++,c=g);for(c=l;c<g;c++)x?(d[c][t]<=m[1]&&(m=[n[c],d[c][t]]),d[c][s]>=m[1]*r&&(f=s)):(d[c][s]>=m[1]&&(m=[n[c],d[c][s]]),d[c][t]<=m[1]*o&&(f=t)),!1!==f&&(p.push(m),u.push(m[0]),h.push(m[1]),m=[n[c],d[c][f]],x=!x,f=!1);i=p.length;return 0!==i&&p[i-1][0]<n[g-1]&&(p.push(m),u.push(m[0]),h.push(m[1])),{values:p,xData:u,yData:h}}}}ZigzagIndicator.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{index:void 0,period:void 0,lowIndex:2,highIndex:1,deviation:1}}),extend(ZigzagIndicator.prototype,{nameComponents:["deviation"],nameSuffixes:["%"],nameBase:"Zig Zag"}),SeriesRegistry.registerSeriesType("zigzag",ZigzagIndicator);export default ZigzagIndicator;