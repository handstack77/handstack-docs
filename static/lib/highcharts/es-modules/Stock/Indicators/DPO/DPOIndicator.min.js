"use strict";import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";const SMAIndicator=SeriesRegistry.seriesTypes["sma"];import U from"../../../Core/Utilities.js";const{extend,merge,correctFloat,pick}=U;function accumulatePoints(e,t,r,i,o){i=pick(t[r][i],t[r]);return o?correctFloat(e-i):correctFloat(e+i)}class DPOIndicator extends SMAIndicator{getValues(e,t){const r=t.period,i=t.index,o=Math.floor(r/2+1),a=r+o,s=e.xData||[],c=e.yData||[],n=c.length,u=[],d=[],p=[];let l,m,f,g,D,P=0;if(!(s.length<=a)){for(g=0;g<r-1;g++)P=accumulatePoints(P,c,g,i);for(D=0;D<=n-a;D++)m=D+r-1,f=D+a-1,P=accumulatePoints(P,c,m,i),l=pick(c[f][i],c[f])-P/r,P=accumulatePoints(P,c,D,i,!0),u.push([s[f],l]),d.push(s[f]),p.push(l);return{values:u,xData:d,yData:p}}}}DPOIndicator.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{index:0,period:21}}),extend(DPOIndicator.prototype,{nameBase:"DPO"}),SeriesRegistry.registerSeriesType("dpo",DPOIndicator);export default DPOIndicator;