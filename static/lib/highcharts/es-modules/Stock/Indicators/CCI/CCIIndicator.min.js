"use strict";import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";const SMAIndicator=SeriesRegistry.seriesTypes["sma"];import U from"../../../Core/Utilities.js";const{isArray,merge}=U;function sumArray(e){return e.reduce(function(e,r){return e+r},0)}function meanDeviation(e,r){var t=e.length;let i=0,s;for(s=0;s<t;s++)i+=Math.abs(r-e[s]);return i}class CCIIndicator extends SMAIndicator{getValues(e,r){const t=r.period,i=e.xData,s=e.yData,a=s?s.length:0,n=[],o=[],u=[],c=[];let d,l,p,f,g=1,m,y,I;if(!(i.length<=t)&&isArray(s[0])&&4===s[0].length){for(;g<t;)l=s[g-1],n.push((l[1]+l[2]+l[3])/3),g++;for(I=t;I<=a;I++)y=((l=s[I-1])[1]+l[2]+l[3])/3,f=n.push(y),d=(y-(m=sumArray(p=n.slice(f-t))/t))/(.015*(meanDeviation(p,m)/t)),o.push([i[I-1],d]),u.push(i[I-1]),c.push(d);return{values:o,xData:u,yData:c}}}}CCIIndicator.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{index:void 0}}),SeriesRegistry.registerSeriesType("cci",CCIIndicator);export default CCIIndicator;