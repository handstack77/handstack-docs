"use strict";import H from"../../Core/Globals.js";const isTouchDevice=H["isTouchDevice"];import U from"../../Core/Utilities.js";const{addEvent,merge,pick}=U,composedMembers=[];let NavigatorConstructor;function compose(t,e){if(U.pushUnique(composedMembers,t)){const o=t.prototype;NavigatorConstructor=e,o.callbacks.push(onChartCallback),addEvent(t,"afterAddSeries",onChartAfterAddSeries),addEvent(t,"afterSetChartSize",onChartAfterSetChartSize),addEvent(t,"afterUpdate",onChartAfterUpdate),addEvent(t,"beforeRender",onChartBeforeRender),addEvent(t,"beforeShowResetZoom",onChartBeforeShowResetZoom),addEvent(t,"update",onChartUpdate)}}function onChartAfterAddSeries(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function onChartAfterSetChartSize(){const t=this.legend,e=this.navigator;let o,i,r;var a,s;e&&(o=t&&t.options,i=e.xAxis,r=e.yAxis,{scrollbarHeight:a,scrollButtonSize:s}=e,this.inverted?(e.left=e.opposite?this.chartWidth-a-e.height:this.spacing[3]+a,e.top=this.plotTop+s):(e.left=pick(i.left,this.plotLeft+s),e.top=e.navigatorOptions.top||this.chartHeight-e.height-a-(this.scrollbar?.options.margin||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(o&&"bottom"===o.verticalAlign&&"proximate"!==o.layout&&o.enabled&&!o.floating?t.legendHeight+pick(o.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),i&&r&&(this.inverted?i.options.left=r.options.left=e.left:i.options.top=r.options.top=e.top,i.setAxisSize(),r.setAxisSize()))}function onChartAfterUpdate(t){this.navigator||this.scroller||!this.options.navigator.enabled&&!this.options.scrollbar.enabled||(this.scroller=this.navigator=new NavigatorConstructor(this),pick(t.redraw,!0)&&this.redraw(t.animation))}function onChartBeforeRender(){var t=this.options;(t.navigator.enabled||t.scrollbar.enabled)&&(this.scroller=this.navigator=new NavigatorConstructor(this))}function onChartBeforeShowResetZoom(){var t=this.options,e=t.navigator,t=t.rangeSelector;if((e&&e.enabled||t&&t.enabled)&&(!isTouchDevice&&"x"===this.zooming.type||isTouchDevice&&"x"===this.zooming.pinchType))return!1}function onChartCallback(t){const e=t.navigator;e&&t.xAxis[0]&&(t=t.xAxis[0].getExtremes(),e.render(t.min,t.max))}function onChartUpdate(t){var e=t.options.navigator||{},o=t.options.scrollbar||{};this.navigator||this.scroller||!e.enabled&&!o.enabled||(merge(!0,this.options.navigator,e),merge(!0,this.options.scrollbar,o),delete t.options.navigator,delete t.options.scrollbar)}const ChartNavigatorComposition={compose:compose};export default ChartNavigatorComposition;