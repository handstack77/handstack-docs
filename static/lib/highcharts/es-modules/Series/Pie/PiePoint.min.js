"use strict";import A from"../../Core/Animation/AnimationUtilities.js";const setAnimation=A["setAnimation"];import Point from"../../Core/Series/Point.js";import U from"../../Core/Utilities.js";const{addEvent,defined,extend,isNumber,pick,relativeLength}=U;class PiePoint extends Point{getConnectorPath(t){const e=t.dataLabelPosition,i=t.options||{},s=i.connectorShape,n=this.connectorShapes[s]||s;return e&&n.call(this,{...e.computed,alignment:e.alignment},e.connectorPosition,i)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(t){var e=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(e.x,e.y,e.r+t,e.r+t,{innerR:e.r-1,start:e.start,end:e.end,borderRadius:e.borderRadius})}constructor(t,e,i){super(t,e,i),this.half=0,this.name??(this.name="Slice");t=t=>{this.slice("select"===t.type)};addEvent(this,"select",t),addEvent(this,"unselect",t)}isValid(){return isNumber(this.y)&&0<=this.y}setVisible(t,e=!0){t!==this.visible&&this.update({visible:t??!this.visible},e,void 0,!1)}slice(t,e,i){const s=this.series,n=s.chart;setAnimation(i,n),e=pick(e,!0),this.sliced=this.options.sliced=t=defined(t)?t:!this.sliced,s.options.data[s.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}extend(PiePoint.prototype,{connectorShapes:{fixedOffset:function(t,e,i){var s=e.breakAt,e=e.touchingSliceAt,i=i.softConnector?["C",t.x+("left"===t.alignment?-5:5),t.y,2*s.x-e.x,2*s.y-e.y,s.x,s.y]:["L",s.x,s.y];return[["M",t.x,t.y],i,["L",e.x,e.y]]},straight:function(t,e){e=e.touchingSliceAt;return[["M",t.x,t.y],["L",e.x,e.y]]},crookedLine:function(t,e,i){var{breakAt:e,touchingSliceAt:s}=e,n=this["series"],[r,o,a]=n.center,a=a/2,{plotLeft:n,plotWidth:c}=n.chart,h="left"===t.alignment,{x:t,y:l}=t;let d=e.x;d=i.crookDistance?(i=relativeLength(i.crookDistance,1),h?r+a+(c+n-r-a)*(1-i):n+(r-a)*i):r+(o-l)*Math.tan((this.angle||0)-Math.PI/2);const p=[["M",t,l]];return(h?d<=t&&d>=e.x:d>=t&&d<=e.x)&&p.push(["L",d,l]),p.push(["L",e.x,e.y],["L",s.x,s.y]),p}}});export default PiePoint;