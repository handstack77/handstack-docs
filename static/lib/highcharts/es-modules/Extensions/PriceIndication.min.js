"use strict";import H from"../Core/Globals.js";const composed=H["composed"];import U from"../Core/Utilities.js";const{addEvent,isArray,merge,pushUnique}=U;function compose(s){pushUnique(composed,"PriceIndication")&&addEvent(s,"afterRender",onSeriesAfterRender)}function onSeriesAfterRender(){var s=this,r=s.options,e=r.lastVisiblePrice,o=r.lastPrice;if((e||o)&&"highcharts-navigator-series"!==r.id){const i=s.xAxis,a=s.yAxis,c=a.crosshair,t=a.cross,l=a.crossLabel,n=s.points,d=s.yData.length,h=n.length,b=s.xData[s.xData.length-1],P=s.yData[d-1];o&&o.enabled&&(a.crosshair=a.options.crosshair=r.lastPrice,!s.chart.styledMode&&a.crosshair&&a.options.crosshair&&r.lastPrice&&(a.crosshair.color=a.options.crosshair.color=r.lastPrice.color||s.color),a.cross=s.lastPrice,o=isArray(P)?P[3]:P,s.lastPriceLabel&&s.lastPriceLabel.destroy(),delete a.crossLabel,a.drawCrosshair(null,{x:b,y:o,plotX:i.toPixels(b,!0),plotY:a.toPixels(o,!0)}),s.yAxis.cross&&(s.lastPrice=s.yAxis.cross,s.lastPrice.addClass("highcharts-color-"+s.colorIndex),s.lastPrice.y=o),s.lastPriceLabel=a.crossLabel),e&&e.enabled&&0<h&&(a.crosshair=a.options.crosshair=merge({color:"transparent"},r.lastVisiblePrice),a.cross=s.lastVisiblePrice,o=n[h-1].isInside?n[h-1]:n[h-2],s.lastVisiblePriceLabel&&s.lastVisiblePriceLabel.destroy(),delete a.crossLabel,a.drawCrosshair(null,o),a.cross&&(s.lastVisiblePrice=a.cross,o&&"number"==typeof o.y&&(s.lastVisiblePrice.y=o.y)),s.lastVisiblePriceLabel=a.crossLabel),a.crosshair=a.options.crosshair=c,a.cross=t,a.crossLabel=l}}const PriceIndication={compose:compose};export default PriceIndication;