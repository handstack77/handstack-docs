"use strict";import ControlPoint from"./ControlPoint.js";import MockPoint from"./MockPoint.js";import U from"../../Core/Utilities.js";var ControlTarget;!function(){function o(){const i=this.controlPoints,r=this.options.controlPoints||[];r.forEach((t,o)=>{const n=U.merge(this.options.controlPointOptions,t);n.index||(n.index=o),r[o]=n,i.push(new ControlPoint(this.chart,this,n))})}function n(t){const o=t.series.getPlotBox(),n=t.series.chart,i=t.mock?t.toAnchor():n.tooltip&&n.tooltip.getAnchor.call({chart:t.series.chart},t)||[0,0,0,0],r={x:i[0]+(this.options.x||0),y:i[1]+(this.options.y||0),height:i[2]||0,width:i[3]||0};return{relativePosition:r,absolutePosition:U.merge(r,{x:r.x+(t.mock?o.translateX:n.plotLeft),y:r.y+(t.mock?o.translateY:n.plotTop)})}}function i(){this.controlPoints.forEach(t=>t.destroy()),this.chart=null,this.controlPoints=null,this.points=null,this.options=null,this.annotation&&(this.annotation=null)}function r(){var t=this.options;return t.points||t.point&&U.splat(t.point)}function s(){const t=this.getPointsOptions(),o=this.points,n=t&&t.length||0;let i,r;for(i=0;i<n;i++){if(!(r=this.point(t[i],o[i])))return void(o.length=0);r.mock&&r.refresh(),o[i]=r}return o}function e(t,o){return t&&t.series?t:(o&&null!==o.series||(U.isObject(t)?o=new MockPoint(this.chart,this,t):U.isString(t)?o=this.chart.get(t)||null:"function"==typeof t&&(o=(n=t.call(o,this)).series?n:new MockPoint(this.chart,this,t))),o);var n}function l(o){this.controlPoints.forEach(t=>t.redraw(o))}function c(){this.controlPoints.forEach(t=>t.render())}function h(n,i,r,s,e){var t;this.chart.inverted&&(t=i,i=r,r=t),this.points.forEach((t,o)=>this.transformPoint(n,i,r,s,e,o),this)}function a(t,o,n,i,r,s){let e=this.points[s];(e=e.mock?e:this.points[s]=MockPoint.fromPoint(e))[t](o,n,i,r)}function f(t,o){this.transform("translate",null,null,t,o)}function u(t,o,n){this.transformPoint("translate",null,null,t,o,n)}(ControlTarget||(ControlTarget={})).compose=function(t){(t=t.prototype).addControlPoints||U.merge(!0,t,{addControlPoints:o,anchor:n,destroyControlTarget:i,getPointsOptions:r,linkPoints:s,point:e,redrawControlPoints:l,renderControlPoints:c,transform:h,transformPoint:a,translate:f,translatePoint:u})}}();export default ControlTarget;