"use strict";import H from"../../../Core/Globals.js";const{doc,isFirefox}=H;import U from"../../../Core/Utilities.js";const{createElement,isArray,isObject,objectEach,pick,stableSort}=U;function addForm(a,e,o,s){if(a){var i=this.container,n=this.lang;let t=createElement("h2",{className:"highcharts-popup-main-title"},void 0,i);t.appendChild(doc.createTextNode(n[e.langKey]||e.langKey||"")),t=createElement("div",{className:"highcharts-popup-lhs-col highcharts-popup-lhs-full"},void 0,i);var l=createElement("div",{className:"highcharts-popup-bottom-row"},void 0,i);addFormFields.call(this,t,a,"",e,[],!0),this.addButton(l,s?n.addButton||"Add":n.saveButton||"Save",s?"add":"save",i,o)}}function addToolbar(t,a,e){const o=this.lang,s=this.container,i=this.showForm,n="highcharts-annotation-toolbar",l=(-1===s.className.indexOf(n)&&(s.className+=" "+n+" highcharts-no-mousewheel"),t&&(s.style.top=t.plotTop+10+"px"),createElement("p",{className:"highcharts-annotation-label"},void 0,s));l.setAttribute("aria-label","Annotation type"),l.appendChild(doc.createTextNode(pick(o[a.langKey]||a.langKey,a.shapes&&a.shapes[0].type,"")));let d=this.addButton(s,o.editButton||"Edit","edit",s,()=>{i.call(this,"annotation-edit",t,a,e)});d.className+=" highcharts-annotation-edit-button",d.style["background-image"]="url("+this.iconsURL+"edit.svg)",(d=this.addButton(s,o.removeButton||"Remove","remove",s,e)).className+=" highcharts-annotation-remove-button",d.style["background-image"]="url("+this.iconsURL+"destroy.svg)"}function addFormFields(s,i,n,t,l,a){if(i){const d=this.addInput,r=this.lang;let e,o;objectEach(t,(t,a)=>{e=""!==n?n+"."+a:a,isObject(t)&&(!isArray(t)||isArray(t)&&isObject(t[0])?((o=r[a]||a).match(/\d/g)||l.push([!0,o,s]),addFormFields.call(this,s,i,e,t,l,!1)):l.push([this,e,"annotation",s,t]))}),a&&(stableSort(l,t=>t[1].match(/format/g)?-1:1),isFirefox&&l.reverse(),l.forEach(t=>{!0===t[0]?createElement("span",{className:"highcharts-annotation-title"},void 0,t[2]).appendChild(doc.createTextNode(t[1])):(t[4]={value:t[4][0],type:t[4][1]},d.apply(t[0],t.splice(1)))}))}}const PopupAnnotations={addForm:addForm,addToolbar:addToolbar};export default PopupAnnotations;