"use strict";import H from"../Core/Globals.js";const{isSafari,win,win:{document:doc}}=H,domurl=win.URL||win.webkitURL||win;function dataURLtoBlob(o){o=o.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([A-Z+\d\/]+)/i);if(o&&3<o.length&&win.atob&&win.ArrayBuffer&&win.Uint8Array&&win.Blob&&domurl.createObjectURL){const e=win.atob(o[3]),n=new win.ArrayBuffer(e.length),t=new win.Uint8Array(n);for(let o=0;o<t.length;++o)t[o]=e.charCodeAt(o);return domurl.createObjectURL(new win.Blob([t],{type:o[1]}))}}function downloadURL(o,e){const n=win.navigator,t=doc.createElement("a");if("string"==typeof o||o instanceof String||!n.msSaveOrOpenBlob){if(o=""+o,1e3<n.userAgent.length)throw new Error("Input too long");var r=/Edge\/\d+/.test(n.userAgent),a=isSafari&&"string"==typeof o&&0===o.indexOf("data:application/pdf");if((a||r||2e6<o.length)&&!(o=dataURLtoBlob(o)||""))throw new Error("Failed to convert to blob");if(void 0!==t.download)t.href=o,t.download=e,doc.body.appendChild(t),t.click(),doc.body.removeChild(t);else try{if(!win.open(o,"chart"))throw new Error("Failed to open window")}catch{win.location.href=o}}else n.msSaveOrOpenBlob(o,e)}const DownloadURL={dataURLtoBlob:dataURLtoBlob,downloadURL:downloadURL};export default DownloadURL;