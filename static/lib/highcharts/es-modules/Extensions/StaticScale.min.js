"use strict";import U from"../Core/Utilities.js";const{addEvent,defined,isNumber,pick}=U;function compose(t,i){const e=i.prototype;e.adjustHeight||(addEvent(t,"afterSetOptions",onAxisAfterSetOptions),e.adjustHeight=chartAdjustHeight,addEvent(i,"render",e.adjustHeight))}function onAxisAfterSetOptions(){var t=this.chart.options.chart;!this.horiz&&isNumber(this.options.staticScale)&&(!t.height||t.scrollablePlotArea&&t.scrollablePlotArea.minHeight)&&(this.staticScale=this.options.staticScale)}function chartAdjustHeight(){const e=this;if("adjustHeight"!==e.redrawTrigger){for(const s of e.axes||[]){const e=s.chart,a=!!e.initiatedScale&&e.options.animation,o=s.options.staticScale;var t,i;s.staticScale&&defined(s.min)&&(t=pick(s.brokenAxis&&s.brokenAxis.unitLength,s.max+s.tickInterval-s.min)*o,i=(t=Math.max(t,o))-e.plotHeight,!e.scrollablePixelsY&&1<=Math.abs(i)&&(e.plotHeight=t,e.redrawTrigger="adjustHeight",e.setSize(void 0,e.chartHeight+i,a)),s.series.forEach(function(t){const i=t.sharedClipKey&&e.sharedClips[t.sharedClipKey];i&&i.attr(e.inverted?{width:e.plotHeight}:{height:e.plotHeight})}))}this.initiatedScale=!0}this.redrawTrigger=null}const StaticScale={compose:compose};export default StaticScale;