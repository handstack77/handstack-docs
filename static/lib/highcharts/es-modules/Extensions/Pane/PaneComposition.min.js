import U from"../../Core/Utilities.js";const{addEvent,correctFloat,defined,pick}=U;function chartGetHoverPane(t){const o=this;let n;return t&&o.pane.forEach(e=>{isInsidePane(t.chartX-o.plotLeft,t.chartY-o.plotTop,e.center)&&(n=e)}),n}function compose(e,t){const o=e.prototype;o.getHoverPane||(o.collectionsWithUpdate.push("pane"),o.getHoverPane=chartGetHoverPane,addEvent(e,"afterIsInsidePlot",onChartAfterIsInsiderPlot),addEvent(t,"afterGetHoverData",onPointerAfterGetHoverData),addEvent(t,"beforeGetHoverData",onPointerBeforeGetHoverData))}function isInsidePane(e,t,o,n,r){let a=!0;var i=o[0],s=o[1],c=Math.sqrt(Math.pow(e-i,2)+Math.pow(t-s,2));return defined(n)&&defined(r)&&(t=Math.atan2(correctFloat(t-s,8),correctFloat(e-i,8)),r!==n&&(a=r<n?n<=t&&t<=Math.PI||t<=r&&t>=-Math.PI:n<=t&&t<=correctFloat(r,8))),c<=Math.ceil(o[2]/2)&&a}function onChartAfterIsInsiderPlot(t){this.polar&&(t.options.inverted&&([t.x,t.y]=[t.y,t.x]),t.isInsidePlot=this.pane.some(e=>isInsidePane(t.x,t.y,e.center,e.axis&&e.axis.normalizedStartAngleRad,e.axis&&e.axis.normalizedEndAngleRad)))}function onPointerAfterGetHoverData(e){var t=this.chart;e.hoverPoint&&e.hoverPoint.plotX&&e.hoverPoint.plotY&&t.hoverPane&&!isInsidePane(e.hoverPoint.plotX,e.hoverPoint.plotY,t.hoverPane.center)&&(e.hoverPoint=void 0)}function onPointerBeforeGetHoverData(t){const o=this.chart;o.polar?(o.hoverPane=o.getHoverPane(t),t.filter=function(e){return e.visible&&!(!t.shared&&e.directTouch)&&pick(e.options.enableMouseTracking,!0)&&(!o.hoverPane||e.xAxis.pane===o.hoverPane)}):o.hoverPane=void 0}const PaneComposition={compose:compose};export default PaneComposition;