"use strict";import H from"../Globals.js";const composed=H["composed"];import U from"../Utilities.js";const{addEvent,defined,pick,pushUnique}=U;var ScrollbarAxis;!function(i){let t;function d(i){var o=pick(i.options&&i.options.min,i.min),t=pick(i.options&&i.options.max,i.max);return{axisMin:o,axisMax:t,scrollMin:defined(i.dataMin)?Math.min(o,i.min,i.dataMin,pick(i.threshold,1/0)):o,scrollMax:defined(i.dataMax)?Math.max(t,i.max,i.dataMax,pick(i.threshold,-1/0)):t}}function s(){var i=this,o=i.scrollbar,t=o&&!o.options.opposite,t=i.horiz?2:t?3:1;o&&(i.chart.scrollbarsOffsets=[0,0],i.chart.axisOffset[t]+=o.size+(o.options.margin||0))}function e(){const n=this;n.options&&n.options.scrollbar&&n.options.scrollbar.enabled&&(n.options.scrollbar.vertical=!n.horiz,n.options.startOnTick=n.options.endOnTick=!1,n.scrollbar=new t(n.chart.renderer,n.options.scrollbar,n.chart),addEvent(n.scrollbar,"changed",function(i){var{axisMin:o,axisMax:t,scrollMin:s,scrollMax:e}=d(n),e=e-s;let a,r;defined(o)&&defined(t)&&(r=n.horiz&&!n.reversed||!n.horiz&&n.reversed?(a=s+e*this.to,s+e*this.from):(a=s+e*(1-this.from),s+e*(1-this.to)),this.shouldUpdateExtremes(i.DOMType)?(o="mousemove"!==i.DOMType&&"touchmove"!==i.DOMType&&void 0,n.setExtremes(r,a,!0,o,i)):this.setRange(this.from,this.to))}))}function a(){const o=this,{scrollMin:i,scrollMax:t}=d(o),s=o.scrollbar,e=o.axisTitleMargin+(o.titleOffset||0),a=o.chart.scrollbarsOffsets,r=o.options.margin||0;let n,l,p;if(s&&a){if(o.horiz)o.opposite||(a[1]+=e),s.position(o.left,o.top+o.height+2+a[1]-(o.opposite?r:0),o.width,o.height),o.opposite||(a[1]+=r),n=1;else{o.opposite&&(a[0]+=e);let i;i=s.options.opposite?o.left+o.width+2+a[0]-(o.opposite?0:r):o.opposite?0:r,s.position(i,o.top,o.width,o.height),o.opposite&&(a[0]+=r),n=0}var c;a[n]+=s.size+(s.options.margin||0),isNaN(i)||isNaN(t)||!defined(o.min)||!defined(o.max)||o.dataMin===o.dataMax?s.setRange(0,1):o.min===o.max?(c=o.pointRange/(o.dataMax+1),l=c*o.min,p=c*(o.max+1),s.setRange(l,p)):(l=(o.min-i)/(t-i),p=(o.max-i)/(t-i),o.horiz&&!o.reversed||!o.horiz&&o.reversed?s.setRange(l,p):s.setRange(1-p,1-l))}}i.compose=function(i,o){pushUnique(composed,"Axis.Scrollbar")&&(t=o,addEvent(i,"afterGetOffset",s),addEvent(i,"afterInit",e),addEvent(i,"afterRender",a))}}(ScrollbarAxis=ScrollbarAxis||{});export default ScrollbarAxis;