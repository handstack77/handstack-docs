"use strict";import U from"./Utilities.js";const{diffObjects,extend,find,merge,pick,uniqueKey}=U;var Responsive;!function(){function s(i,e){const s=i.condition,t=s.callback||function(){return this.chartWidth<=pick(s.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=pick(s.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=pick(s.minWidth,0)&&this.chartHeight>=pick(s.minHeight,0)};t.call(this)&&e.push(i._id)}function t(i,e){const s=this.options.responsive,t=this.currentResponsive;let n=[],o;!e&&s&&s.rules&&s.rules.forEach(i=>{void 0===i._id&&(i._id=uniqueKey()),this.matchResponsiveRule(i,n)},this);const p=merge(...n.map(e=>find((s||{}).rules||[],i=>i._id===e)).map(i=>i&&i.chartOptions));p.isResponsiveOptions=!0,n=n.toString()||void 0;e=t&&t.ruleIds;n!==e&&(t&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(t.undoOptions,i,!0),this.updatingResponsive=!1),n?((o=diffObjects(p,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:n,mergedOptions:p,undoOptions:o},this.updatingResponsive||this.update(p,i,!0)):this.currentResponsive=void 0)}(Responsive||(Responsive={})).compose=function(i){var e=i.prototype;return e.matchResponsiveRule||extend(e,{matchResponsiveRule:s,setResponsive:t}),i}}();export default Responsive;