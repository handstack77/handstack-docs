"use strict";import U from"../Core/Utilities.js";const{addEvent,pick}=U;var FocusBorderComposition;!function(o){const H=["x","y","transform","width","height","r","d","stroke-width"];function s(){const o=this.focusElement,t=this.options.accessibility.keyboardNavigation.focusBorder;o&&(o.removeFocusBorder(),t.enabled&&o.addFocusBorder(t.margin,{stroke:t.style.color,strokeWidth:t.style.lineWidth,r:t.style.borderRadius}))}function d(o,t){const e=this.options.accessibility.keyboardNavigation.focusBorder,r=t||o.element;r&&r.focus&&(r.hcEvents&&r.hcEvents.focusin||addEvent(r,"focusin",function(){}),r.focus(),e.hideBrowserFocusOutline&&(r.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=o,this.renderFocusBorder()}function i(o,t){this.focusBorder&&this.removeFocusBorder();const e=this.getBBox(),r=pick(o,3),s=this.parentGroup,d=this.scaleX||s&&s.scaleX,i=this.scaleY||s&&s.scaleY,c=d?!i:i,n=c?Math.abs(d||i||1):(Math.abs(d||1)+Math.abs(i||1))/2;e.x+=this.translateX||0,e.y+=this.translateY||0;let a=e.x-r,u=e.y-r,h=e.width+2*r,f=e.height+2*r;var B,l,y,p,k,m,F=!!this.text,v=("text"!==this.element.nodeName&&!F||(B=!!this.rotation,l=F?{x:B?1:0,y:0}:function(o){let t=0,e=0;return"middle"===o.attr("text-anchor")?t=e=.5:o.rotation?t=.25:e=.75,{x:t,y:e}}(this),y=+this.attr("x"),p=+this.attr("y"),isNaN(y)||(a=y-e.width*l.x-r),isNaN(p)||(u=p-e.height*l.y-r),F&&B&&(F=h,h=f,f=F,isNaN(y)||(a=y-e.height*l.x-r),isNaN(p)||(u=p-e.width*l.y-r))),this.focusBorder=this.renderer.rect(a,u,h,f,parseInt((t&&t.r||0).toString(),10)/n).addClass("highcharts-focus-border").attr({zIndex:99}).add(s),this.renderer.styledMode||this.focusBorder.attr({stroke:t&&t.stroke,"stroke-width":(t&&t.strokeWidth||0)/n}),m=[o,t],(k=this).focusBorderUpdateHooks||(k.focusBorderUpdateHooks={},H.forEach(o=>{o+="Setter";const t=k[o]||k._defaultSetter;k.focusBorderUpdateHooks[o]=t,k[o]=function(){var o=t.apply(k,arguments);return k.addFocusBorder.apply(k,m),o}})),this);if(!v.focusBorderDestroyHook){const x=v.destroy;v.destroy=function(){return v.focusBorder&&v.focusBorder.destroy&&v.focusBorder.destroy(),x.apply(v,arguments)},v.focusBorderDestroyHook=x}}function c(){var e,o;(e=this).focusBorderUpdateHooks&&(Object.keys(e.focusBorderUpdateHooks).forEach(o=>{var t=e.focusBorderUpdateHooks[o];t===e._defaultSetter?delete e[o]:e[o]=t}),delete e.focusBorderUpdateHooks),(o=this).focusBorderDestroyHook&&(o.destroy=o.focusBorderDestroyHook,delete o.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}o.compose=function(o,t){const e=o.prototype,r=t.prototype;e.renderFocusBorder||(e.renderFocusBorder=s,e.setFocusToElement=d),r.addFocusBorder||(r.addFocusBorder=i,r.removeFocusBorder=c)}}(FocusBorderComposition=FocusBorderComposition||{});export default FocusBorderComposition;