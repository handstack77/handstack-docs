"use strict";import F from"../Core/Templating.js";const format=F["format"];import U from"../Core/Utilities.js";const{getNestedProperty,pick}=U;var A11yI18nComposition;!function(t){function s(t,e,n){const i=[];let r,s,o=0;for(;r=((t,e)=>{const n=t.slice(e||0),i=n.indexOf("{"),r=n.indexOf("}");if(-1<i&&i<r)return{statement:n.substring(i+1,r),begin:e+i+1,end:e+r}})(t,o),(s=t.substring(o,r&&r.begin-1)).length&&i.push({value:s,type:"constant"}),r&&i.push({value:r.statement,type:"statement"}),o=r?r.end+1:o+1,r;);return i.forEach(t=>{"statement"===t.type&&(t.value=function(n,i){var r=n.indexOf("#each("),e=n.indexOf("#plural("),s=n.indexOf("["),o=n.indexOf("]");let a,l;if(-1<r){const u=n.slice(r).indexOf(")")+r,p=n.substring(0,r),c=n.substring(u+1),f=n.substring(r+6,u),g=f.split(",");let t=Number(g[1]),e;if(l="",a=getNestedProperty(g[0],i)){e=(t=isNaN(t)?a.length:t)<0?a.length+t:Math.min(t,a.length);for(let t=0;t<e;++t)l+=p+a[t]+c}return l.length?l:""}if(-1<e){const t=n.slice(e).indexOf(")")+e,m=n.substring(e+8,t),d=m.split(","),b=Number(getNestedProperty(d[0],i));switch(b){case 0:l=pick(d[4],d[1]);break;case 1:l=pick(d[2],d[1]);break;case 2:l=pick(d[3],d[1]);break;default:l=d[1]}return l?(r=l).trim&&r.trim()||r.replace(/^\s+|\s+$/g,""):""}if(-1<s){e=n.substring(0,s),r=Number(n.substring(s+1,o));let t;return a=getNestedProperty(e,i),!isNaN(r)&&a&&(r<0?void 0===(t=a[a.length+r])&&(t=a[0]):void 0===(t=a[r])&&(t=a[a.length-1])),void 0!==t?t:""}return"{"+n+"}"}(t.value,e))}),format(i.reduce((t,e)=>t+e.value,""),e,n)}function n(t,e){var n=t.split(".");let i=this.options.lang,r=0;for(;r<n.length;++r)i=i&&i[n[r]];return"string"==typeof i?s(i,e,this):""}t.compose=function(t){const e=t.prototype;e.langFormat||(e.langFormat=n)},t.i18nFormat=s}(A11yI18nComposition=A11yI18nComposition||{});export default A11yI18nComposition;