!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/funnel3d",["highcharts","highcharts/highcharts-3d","highcharts/modules/cylinder"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(n){"use strict";var e=n?n._modules:{};function t(e,t,r,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,r),"function"==typeof CustomEvent&&n.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/Funnel3D/SVGElement3DFunnel.js",[e["Core/Color/Color.js"],e["Core/Globals.js"],e["Core/Renderer/RendererRegistry.js"],e["Core/Utilities.js"]],function(e,t,r,i){const w=e["parse"],a=t["charts"];e=r.getRendererType().prototype.Element3D;const b=i["merge"];class n extends e{constructor(){super(...arguments),this.mainParts=["top","bottom"],this.parts=["top","bottom","frontUpper","backUpper","frontLower","backLower","rightUpper","rightLower"],this.sideGroups=["upperGroup","lowerGroup"],this.sideParts={upperGroup:["frontUpper","backUpper","rightUpper"],lowerGroup:["frontLower","backLower","rightLower"]},this.pathType="funnel3d"}opacitySetter(e){const t=this,r=parseFloat(e),i=t.parts,n=a[t.renderer.chartIndex],o="group-opacity-"+r+"-"+n.index;if(t.parts=t.mainParts,t.singleSetterForParts("opacity",r),t.parts=i,!n.renderer.filterId){n.renderer.definition({tagName:"filter",attributes:{id:o},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"table",tableValues:"0 "+r}}]}]});for(const s of t.sideGroups)t[s].attr({filter:"url(#"+o+")"});if(t.renderer.styledMode){n.renderer.definition({tagName:"style",textContent:".highcharts-"+o+" {filter:url(#"+o+")}"});for(const d of t.sideGroups)t[d].addClass("highcharts-"+o)}}return t}fillSetter(e){let t=w(e);const r=this,i=t.rgba[3],n={top:w(e).brighten(.1).get(),bottom:w(e).brighten(-.2).get()};if(i<1?(t.rgba[3]=1,t=t.get("rgb"),r.attr({opacity:i})):t=e,(t=t.linearGradient||t.radialGradient||!r.gradientForSides?t:{linearGradient:{x1:0,x2:1,y1:1,y2:1},stops:[[0,w(e).brighten(-.2).get()],[.5,e],[1,w(e).brighten(-.2).get()]]}).linearGradient)for(const c of r.sideGroups){var o=r[c].gradientBox,s=t.linearGradient,d=b(t,{linearGradient:{x1:o.x+s.x1*o.width,y1:o.y+s.y1*o.height,x2:o.x+s.x2*o.width,y2:o.y+s.y2*o.height}});for(const g of r.sideParts[c])n[g]=d}else if(b(!0,n,{frontUpper:t,backUpper:t,rightUpper:t,frontLower:t,backLower:t,rightLower:t}),t.radialGradient)for(const u of r.sideGroups){var a=r[u].gradientBox,l=a.x+a.width/2,h=a.y+a.height/2,p=Math.min(a.width,a.height);for(const f of r.sideParts[u])r[f].setRadialReference([l,h,p])}if(r.singleSetterForParts("fill",null,n),r.color=r.fill=e,t.linearGradient)for(const y of[r.frontLower,r.frontUpper]){const x=y.element,m=x&&r.renderer.gradients[x.gradient];m&&"userSpaceOnUse"!==m.attr("gradientUnits")&&m.attr({gradientUnits:"userSpaceOnUse"})}return r}adjustForGradient(){var r,i=this;for(const n of i.sideGroups){let e={x:Number.MAX_VALUE,y:Number.MAX_VALUE},t={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE};for(const o of i.sideParts[n]){const s=i[o];r=s.getBBox(!0),e={x:Math.min(e.x,r.x),y:Math.min(e.y,r.y)},t={x:Math.max(t.x,r.x+r.width),y:Math.max(t.y,r.y+r.height)}}i[n].gradientBox={x:e.x,width:t.x-e.x,y:e.y,height:t.y-e.y}}}zIndexSetter(){return this.finishedOnAdd&&this.adjustForGradient(),this.renderer.Element.prototype.zIndexSetter.apply(this,arguments)}onAdd(){this.adjustForGradient(),this.finishedOnAdd=!0}}return n}),t(e,"Series/Funnel3D/Funnel3DComposition.js",[e["Series/Funnel3D/SVGElement3DFunnel.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(r,e,t){const m=e["charts"],{error:w,extend:i,merge:b}=t;function n(e){const t=this.element3d("funnel3d",e),r=this.styledMode,i={"stroke-width":1,stroke:"none"};t.upperGroup=this.g("funnel3d-upper-group").attr({zIndex:t.frontUpper.zIndex}).add(t);for(const n of[t.frontUpper,t.backUpper,t.rightUpper])r||n.attr(i),n.add(t.upperGroup);t.lowerGroup=this.g("funnel3d-lower-group").attr({zIndex:t.frontLower.zIndex}).add(t);for(const o of[t.frontLower,t.backLower,t.rightLower])r||o.attr(i),o.add(t.lowerGroup);return t.gradientForSides=e.gradientForSides,t}function o(e){this.getCylinderEnd||w("A required Highcharts module is missing: cylinder.js",!0,m[this.chartIndex]);var t=this,r=m[t.chartIndex],i=e.alphaCorrection=90-Math.abs(r.options.chart.options3d.alpha%180-90),n=this.cuboidPath.call(t,b(e,{depth:e.width,width:(e.width+e.bottom.width)/2})),o=n.isTop,s=!n.isFront,d=!!e.middle,a=t.getCylinderEnd(r,b(e,{x:e.x-e.width/2,z:e.z-e.width/2,alphaCorrection:i})),l=e.bottom.width,h=b(e,{width:l,x:e.x-l/2,z:e.z-l/2,alphaCorrection:i}),p=t.getCylinderEnd(r,h,!0);let c=l,g=h,u=p,f=p,y;d&&(c=e.middle.width,g=b(e,{y:e.y+e.middle.fraction*e.height,width:c,x:e.x-c/2,z:e.z-c/2}),u=t.getCylinderEnd(r,g,!1),f=t.getCylinderEnd(r,g,!1));const x={top:a,bottom:p,frontUpper:t.getCylinderFront(a,u),zIndexes:{group:n.zIndexes.group,top:0!==o?0:3,bottom:1!==o?0:3,frontUpper:s?2:1,backUpper:s?1:2,rightUpper:s?2:1}};return x.backUpper=t.getCylinderBack(a,u),y=Math.min(c,e.width)/Math.max(c,e.width)!=1,x.rightUpper=t.getCylinderFront(t.getCylinderEnd(r,b(e,{x:e.x-e.width/2,z:e.z-e.width/2,alphaCorrection:y?-i:0}),!1),t.getCylinderEnd(r,b(g,{alphaCorrection:y?-i:0}),!d)),d&&(y=Math.min(c,l)/Math.max(c,l)!=1,b(!0,x,{frontLower:t.getCylinderFront(f,p),backLower:t.getCylinderBack(f,p),rightLower:t.getCylinderFront(t.getCylinderEnd(r,b(h,{alphaCorrection:y?-i:0}),!0),t.getCylinderEnd(r,b(g,{alphaCorrection:y?-i:0}),!1)),zIndexes:{frontLower:s?2:1,backLower:s?1:2,rightLower:s?1:2}})),x}return{compose:function(e){const t=e.prototype;t.funnel3d||(t.Element3D.types.funnel3d=r,i(t,{funnel3d:n,funnel3dPath:o}))}}}),t(e,"Series/Funnel3D/Funnel3DSeriesDefaults.js",[],function(){return{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,gradientForSides:!0,animation:!1,edgeWidth:0,colorByPoint:!0,showInLegend:!1,dataLabels:{align:"right",crop:!1,inside:!1,overflow:"allow"}}}),t(e,"Series/Funnel3D/Funnel3DPoint.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){var e=e["seriesTypes"]["column"];const r=t["extend"];class i extends e.prototype.pointClass{}return r(i.prototype,{shapeType:"funnel3d"}),i}),t(e,"Series/Funnel3D/Funnel3DSeries.js",[e["Series/Funnel3D/Funnel3DComposition.js"],e["Series/Funnel3D/Funnel3DSeriesDefaults.js"],e["Series/Funnel3D/Funnel3DPoint.js"],e["Core/Globals.js"],e["Core/Math3D.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,r,i,n,o,s){i=i.noop;const v=n["perspective"],{series:A,seriesTypes:{column:l}}=o,{extend:k,merge:d,pick:E,relativeLength:z}=s;class a extends l{alignDataLabel(e,t,r){const i=this,n=e.dlBoxRaw,o=i.chart.inverted,s=e.plotY>E(i.translatedThreshold,i.yAxis.len),d=E(r.inside,!!i.options.stacking),a={x:n.x,y:n.y,height:0};r.align=E(r.align,!o||d?"center":s?"right":"left"),r.verticalAlign=E(r.verticalAlign,o||d?"middle":s?"top":"bottom"),"top"!==r.verticalAlign&&(a.y+=n.bottom/("bottom"===r.verticalAlign?1:2)),a.width=i.getWidthAt(a.y),i.options.reversed&&(a.width=n.fullWidth-a.width),d?a.x-=a.width/2:"left"===r.align?(r.align="right",a.x-=1.5*a.width):"right"===r.align?(r.align="left",a.x+=a.width/2):a.x-=a.width/2,e.dlBox=a,l.prototype.alignDataLabel.apply(i,arguments)}bindAxes(){A.prototype.bindAxes.apply(this,arguments),k(this.xAxis.options,{gridLineWidth:0,lineWidth:0,title:void 0,tickPositions:[]}),d(!0,this.yAxis.options,{gridLineWidth:0,title:void 0,labels:{enabled:!1}})}translate(){A.prototype.translate.apply(this,arguments);const e=this,t=e.chart,r=e.options,i=r.reversed,n=r.ignoreHiddenPoint,o=t.plotWidth,s=t.plotHeight,d=r.center,a=z(d[0],o),l=z(d[1],s),h=z(r.width,o),p=z(r.height,s),c=z(r.neckWidth,o),g=z(r.neckHeight,s),u=l-p/2+p-g,f=e.points;let y=0,x=0,m,w,b,C,F,S,L,U,G;e.getWidthAt=w=function(e){var t=l-p/2;return e>u||p===g?c:c+(h-c)*(1-(e-t)/(p-g))},e.center=[a,l,p],e.centerX=a;for(const j of f)n&&!1===j.visible||(y+=j.y);for(const D of f)L=null,b=y?D.y/y:0,F=l-p/2+x*p,S=F+b*p,m=w(F),U=S-F,G={gradientForSides:E(D.options.gradientForSides,r.gradientForSides),x:a,y:F,height:U,width:m,z:1,top:{width:m}},m=w(S),G.bottom={fraction:b,width:m},F>=u?G.isCylinder=!0:S>u&&(L=S,m=w(u),S=u,G.bottom.width=m,G.middle={fraction:U?(u-F)/U:0,width:m}),i&&(G.y=F=l+p/2-(x+b)*p,G.middle&&(G.middle.fraction=1-(U?G.middle.fraction:0)),m=G.width,G.width=G.bottom.width,G.bottom.width=m),D.shapeArgs=k(D.shapeArgs,G),D.percentage=100*b,D.plotX=a,D.plotY=i?l+p/2-(x+b/2)*p:(F+(L||S))/2,C=v([{x:a,y:D.plotY,z:i?-(h-w(D.plotY))/2:-w(D.plotY)/2}],t,!0)[0],D.tooltipPos=[C.x,C.y],D.dlBoxRaw={x:a,width:w(D.plotY),y:F,bottom:G.height||0,fullWidth:h},n&&!1===D.visible||(x+=b)}}return a.compose=e.compose,a.defaultOptions=d(l.defaultOptions,t),k(a.prototype,{pointClass:r,translate3dShapes:i}),o.registerSeriesType("funnel3d",a),a}),t(e,"masters/modules/funnel3d.src.js",[e["Core/Globals.js"],e["Series/Funnel3D/Funnel3DSeries.js"],e["Core/Renderer/RendererRegistry.js"]],function(e,t,r){return t.compose(r.getRendererType()),e})});