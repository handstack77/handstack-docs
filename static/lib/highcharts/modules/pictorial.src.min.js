!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/pictorial",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(s){"use strict";var t=s?s._modules:{};function e(t,e,i,r){t.hasOwnProperty(e)||(t[e]=r.apply(null,i),"function"==typeof CustomEvent&&s.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Extensions/PatternFill.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Utilities.js"]],function(t,e,f){const g=t["animObject"],a=e["getOptions"],{addEvent:o,defined:s,erase:n,extend:h,merge:l,pick:u,removeEvent:m,wrap:c}=f,d=function(){const t=[],e=a().colors;let i=0;for(const r of["M 0 0 L 5 5 M 4.5 -0.5 L 5.5 0.5 M -0.5 4.5 L 0.5 5.5","M 0 5 L 5 0 M -0.5 0.5 L 0.5 -0.5 M 4.5 5.5 L 5.5 4.5","M 2 0 L 2 5 M 4 0 L 4 5","M 0 2 L 5 2 M 0 4 L 5 4","M 0 1.5 L 2.5 1.5 L 2.5 0 M 2.5 5 L 2.5 3.5 L 5 3.5"])t.push({path:r,color:e[i++],width:5,height:5,patternTransform:"scale(1.4 1.4)"});i=5;for(const s of["M 0 0 L 5 10 L 10 0","M 3 3 L 8 3 L 8 8 L 3 8 Z","M 5 5 m -4 0 a 4 4 0 1 1 8 0 a 4 4 0 1 1 -8 0","M 0 0 L 10 10 M 9 -1 L 11 1 M -1 9 L 1 11","M 0 10 L 10 0 M -1 1 L 1 -1 M 9 11 L 11 9"])t.push({path:s,color:e[i],width:10,height:10}),i+=5;return t}();function p(t,e){const i=JSON.stringify(t),r=i.length||0;let s=0,a=0,o,n;if(e){n=Math.max(Math.floor(r/500),1);for(let t=0;t<r;t+=n)s+=i.charCodeAt(t);s&=s}for(;a<r;++a)o=i.charCodeAt(a),s=(s<<5)-s+o,s&=s;return s.toString(16).replace("-","1")}function x(){if(this.renderer&&(this.renderer.defIds||[]).filter(t=>t&&t.indexOf&&0===t.indexOf("highcharts-pattern-")).length){for(const t of this.series)if(t.visible)for(const e of t.points){const i=e.options&&e.options.color;i&&i.pattern&&(i.pattern._width="defer",i.pattern._height="defer")}this.redraw(!1)}}function w(){const i={},r=this.renderer,t=(r.defIds||[]).filter(t=>t.indexOf&&0===t.indexOf("highcharts-pattern-"));if(t.length){[].forEach.call(this.renderTo.querySelectorAll('[color^="url("], [fill^="url("], [stroke^="url("]'),t=>{const e=t.getAttribute("fill")||t.getAttribute("color")||t.getAttribute("stroke");e&&(t=e.replace(r.url,"").replace("url(#","").replace(")",""),i[t]=!0)});for(const e of t)i[e]||(n(r.defIds,e),r.patternElements[e]&&(r.patternElements[e].destroy(),delete r.patternElements[e]))}}function y(){const t=this.options.color;t&&t.pattern&&("string"==typeof t.pattern.path&&(t.pattern.path={d:t.pattern.path}),this.color=this.options.color=l(this.series.options.color,t))}function C(t){const e=t.args[0],i=t.args[1],r=t.args[2],s=this.chartIndex||0;let a=e.pattern,o="#333333";if(!(a=void 0!==e.patternIndex&&d?d[e.patternIndex]:a))return!0;if(a.image||"string"==typeof a.path||a.path&&a.path.d){let t=r.parentNode&&r.parentNode.getAttribute("class");t=t&&-1<t.indexOf("highcharts-legend"),"defer"!==a._width&&"defer"!==a._height||b.call({graphic:{element:r}},a),!t&&a.id||((a=l({},a)).id="highcharts-pattern-"+s+"-"+p(a)+p(a,!0)),this.addPattern(a,!this.forExport&&u(a.animation,this.globalAnimation,{duration:100})),o=`url(${this.url}#${a.id+(this.forExport?"-export":"")})`}else o=a.color||o;return r.setAttribute(i,o),!(e.toString=function(){return o})}function A(){var t=this.chart.isResizing;if(this.isDirtyData||t||!this.chart.hasRendered)for(const e of this.points){const i=e.options&&e.options.color;i&&i.pattern&&(!t||e.shapeArgs&&e.shapeArgs.width&&e.shapeArgs.height?e.calculatePatternDimensions(i.pattern):(i.pattern._width="defer",i.pattern._height="defer"))}}function b(t){if(!t.width||!t.height){const i=this.graphic&&(this.graphic.getBBox&&this.graphic.getBBox(!0)||this.graphic.element&&this.graphic.element.getBBox())||{},r=this.shapeArgs;if(r&&(i.width=r.width||i.width,i.height=r.height||i.height,i.x=r.x||i.x,i.y=r.y||i.y),t.image){var e;if(!i.width||!i.height)return t._width="defer",t._height="defer",e=this.series.chart.mapView&&this.series.chart.mapView.getSVGTransform().scaleY,void(s(e)&&e<0&&(t._inverted=!0));t.aspectRatio&&(i.aspectRatio=i.width/i.height,t.aspectRatio>i.aspectRatio?i.aspectWidth=i.height*t.aspectRatio:i.aspectHeight=i.width/t.aspectRatio),t._width=t.width||Math.ceil(i.aspectWidth||i.width),t._height=t.height||Math.ceil(i.aspectHeight||i.height)}t.width||(t._x=t.x||0,t._x+=i.x-Math.round(i.aspectWidth?Math.abs(i.aspectWidth-i.width)/2:0)),t.height||(t._y=t.y||0,t._y+=i.y-Math.round(i.aspectHeight?Math.abs(i.aspectHeight-i.height)/2:0))}}function M(e,t){const i=u(t,!0),r=g(i),s=e.color||"#333333",a=e.height||("number"==typeof e._height?e._height:0)||32,o=t=>this.rect(0,0,n,a).attr({fill:t}).add(p),n=e.width||("number"==typeof e._width?e._width:0)||32;let h,l=e.id,c;if(l||(this.idCounter=this.idCounter||0,l="highcharts-pattern-"+this.idCounter+"-"+(this.chartIndex||0),++this.idCounter),this.forExport&&(l+="-export"),this.defIds=this.defIds||[],-1<this.defIds.indexOf(l))return;this.defIds.push(l);const d={id:l,patternUnits:"userSpaceOnUse",patternContentUnits:e.patternContentUnits||"userSpaceOnUse",width:n,height:a,x:e._x||e.x||0,y:e._y||e.y||0},p=(e._inverted&&(d.patternTransform="scale(1, -1)",e.patternTransform&&(e.patternTransform+=" scale(1, -1)")),e.patternTransform&&(d.patternTransform=e.patternTransform),this.createElement("pattern").attr(d).add(this.defs));return p.id=l,e.path?(c=f.isObject(e.path)?e.path:{d:e.path},e.backgroundColor&&o(e.backgroundColor),h={d:c.d},this.styledMode||(h.stroke=c.stroke||s,h["stroke-width"]=u(c.strokeWidth,2),h.fill=c.fill||"none"),c.transform&&(h.transform=c.transform),this.createElement("path").attr(h).add(p),p.color=s):e.image&&(i?this.image(e.image,0,0,n,a,function(){this.animate({opacity:u(e.opacity,1)},r),m(this.element,"load")}).attr({opacity:0}):this.image(e.image,0,0,n,a)).add(p),e.image&&i||void 0===e.opacity||[].forEach.call(p.element.childNodes,t=>{t.setAttribute("opacity",e.opacity)}),this.patternElements=this.patternElements||{},this.patternElements[l]=p}function v(t){const e=this.options.color;e&&e.pattern&&!e.pattern.color?(delete this.options.color,t.apply(this,[].slice.call(arguments,1)),e.pattern.color=this.color,this.color=this.options.color=e):t.apply(this,[].slice.call(arguments,1))}function S(){if(this.chart?.mapView){const t=this.chart,i=t.renderer,r=i.patternElements;i.defIds?.length&&r&&this.points.filter(function(t){const e=t;return!!e.graphic&&((e.graphic.element.hasAttribute("fill")||e.graphic.element.hasAttribute("color")||e.graphic.element.hasAttribute("stroke"))&&!e.options.color?.pattern?.image&&!!e.group?.scaleX&&!!e.group?.scaleY)}).map(function(t){const e=t;return{id:(e.graphic?.element.getAttribute("fill")||e.graphic?.element.getAttribute("color")||e.graphic?.element.getAttribute("stroke")||"").replace(i.url,"").replace("url(#","").replace(")",""),x:e.group?.scaleX||1,y:e.group?.scaleY||1}}).filter(function(i,r,t){return""!==i.id&&-1!==i.id.indexOf("highcharts-pattern-")&&!t.some(function(t,e){return t.id===i.id&&e<r})}).forEach(function(t){var e=t.id;r[e].scaleX=1/t.x,r[e].scaleY=1/t.y,r[e].updateTransform("patternTransform")})}}return{compose:function(t,e,i){var r=e.prototype.pointClass,s=r.prototype;s.calculatePatternDimensions||(o(t,"endResize",x),o(t,"redraw",w),h(s,{calculatePatternDimensions:b}),o(r,"afterInit",y),o(e,"render",A),c(e.prototype,"getColor",v),o(e,"afterRender",S),o(e,"mapZoomComplete",S),h(i.prototype,{addPattern:M}),o(i,"complexColor",C))},patterns:d}}),e(t,"Series/Pictorial/PictorialUtilities.js",[t["Core/Utilities.js"]],function(t){const s=t["defined"];return{rescalePatternFill:function(i,r,s,a,o=1){const t=i&&i.attr("fill"),e=t&&t.match(/url\(([^)]+)\)/);if(e){const h=document.querySelector(e[1]+" path");if(h){let t=h.getBBox();if(0===t.width){const l=h.parentElement;i.renderer.box.appendChild(h),t=h.getBBox(),l.appendChild(h)}let e=1/(t.width+o);var i=r/a/t.height,a=t.width/t.height,r=s/r,n=-t.width/2;a<r&&(e=e*a/r),h.setAttribute("stroke-width",o/(s*e)),h.setAttribute("transform","translate(0.5, 0)"+`scale(${e} ${i}) `+`translate(${n+o*e/2}, ${-t.y})`)}}},invertShadowGroup:function(t,e){(e=e.chart.inverted)&&t.attr({rotation:e?90:0,scaleX:e?-1:1})},getStackMetrics:function(t,e){let i=t.len,r=0;return e&&s(e.max)&&(r=t.toPixels(e.max,!0),i=t.len-r),{height:i,y:r}}}}),e(t,"Series/Pictorial/PictorialPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Series/Pictorial/PictorialUtilities.js"]],function(t,e){t=t.seriesTypes.column.prototype.pointClass;const{rescalePatternFill:r,getStackMetrics:s}=e;class i extends t{setState(){var t=this,e=(super.setState.apply(t,arguments),t.series),i=e.options.paths;t.graphic&&t.shapeArgs&&i&&(i=i[t.index%i.length],r(t.graphic,s(e.yAxis,i).height,t.shapeArgs.width||0,t.shapeArgs.height||1/0,t.series.options.borderWidth||0))}}return i}),e(t,"Series/Pictorial/PictorialSeries.js",[t["Extensions/PatternFill.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Series/Pictorial/PictorialPoint.js"],t["Series/Pictorial/PictorialUtilities.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,i,r,s,a,o,n,h,l){var c=o.seriesTypes.column;t.compose(i,a,h);const d=e["animObject"],{getStackMetrics:M,invertShadowGroup:v,rescalePatternFill:S}=s,{addEvent:p,defined:f,merge:g,objectEach:u,pick:E}=l;class m extends c{animate(t){const{chart:e,group:i}=this,r=d(this.options.animation),s=[this.getSharedClipKey(),r.duration,r.easing,r.defer].join(",");let a=e.sharedClips[s];if(t&&i){const o=this.getClipBox();a||(o.y=o.height,o.height=0,a=e.renderer.clipRect(o),e.sharedClips[s]=a),i.clip(a)}else a&&!a.hasClass("highcharts-animating")&&(t=this.getClipBox(),a.addClass("highcharts-animating").animate(t,r))}animateDrilldown(){}animateDrillupFrom(){}pointAttribs(t){const e=super.pointAttribs.apply(this,arguments),i=this.options,r=i.paths;var s,a,o;return t&&t.shapeArgs&&r&&(o=r[t.index%r.length],{y:s,height:a}=M(this.yAxis,o),(o=o.definition)!==t.pathDef?(t.pathDef=o,e.fill={pattern:{path:{d:o,fill:e.fill,strokeWidth:e["stroke-width"],stroke:e.stroke},x:t.shapeArgs.x,y:s,width:t.shapeArgs.width||0,height:a,patternContentUnits:"objectBoundingBox",backgroundColor:"none",color:"#ff0000"}}):t.pathDef&&t.graphic&&delete e.fill),delete e.stroke,delete e.strokeWidth,e}getExtremes(){const e=super.getExtremes.apply(this,arguments),t=this.options.paths;return t&&t.forEach(function(t){f(t.max)&&f(e.dataMax)&&t.max>e.dataMax&&(e.dataMax=t.max)}),e}}function x(t){const e=Object.keys(t.points).filter(t=>1<t.split(",").length),i=t.axis.chart.series,r=e.map(t=>parseFloat(t.split(",")[0]));let s=-1;r.forEach(t=>{i[t]&&i[t].visible&&(s=t)});const a=t.axis.chart.series[s];if(a&&a.is("pictorial")&&t.axis.hasData()&&a.xAxis.hasData()){const o=a.xAxis,n=t.axis.options,h=t.axis.chart,l=t.shadow,c=o.toPixels(t.x,!0),d=h.inverted?o.len-c:c,p=a.options.paths||[],f=t.x%p.length,g=p[f],u=a.getColumnMetrics&&a.getColumnMetrics().width,{height:m,y:x}=M(a.yAxis,g),w=n.stackShadow,y=E(w&&w.borderWidth,a.options.borderWidth,1);if(!l&&w&&w.enabled&&g)t.shadowGroup||(t.shadowGroup=h.renderer.g("shadow-group").add()),t.shadowGroup.attr({translateX:(h.inverted?t.axis:o).pos,translateY:(h.inverted?o:t.axis).pos}),t.shadow=h.renderer.rect(d,x,u,m).attr({fill:{pattern:{path:{d:g.definition,fill:w.color||"#dedede",strokeWidth:y,stroke:w.borderColor||"transparent"},x:d,y:x,width:u,height:m,patternContentUnits:"objectBoundingBox",backgroundColor:"none",color:"#dedede"}}}).add(t.shadowGroup),v(t.shadowGroup,t.axis),S(t.shadow,m,u,m,y),t.setOffset(a.pointXOffset||0,a.barW||0);else if(l&&t.shadowGroup){l.animate({x:d,y:x,width:u,height:m});const C=/url\(([^)]+)\)/,A=l.attr("fill"),b=A&&A.match(C);b&&h.renderer.patternElements&&h.renderer.patternElements[b[1].slice(1)].animate({x:d,y:x,width:u,height:m}),t.shadowGroup.animate({translateX:(h.inverted?t.axis:o).pos,translateY:(h.inverted?o:t.axis).pos}),v(t.shadowGroup,t.axis),S(l,m,u,m,y),t.setOffset(a.pointXOffset||0,a.barW||0)}}else t.shadow&&t.shadowGroup&&(t.shadow.destroy(),t.shadow=void 0,t.shadowGroup.destroy(),t.shadowGroup=void 0)}function w(t,e){t.axes&&t.axes.forEach(function(t){t.stacking&&(t=t.stacking.stacks,u(t,function(t){u(t,function(t){e(t)})}))})}function y(t){w(t,function(t){t.shadow&&t.shadowGroup&&(t.shadow.destroy(),t.shadowGroup.destroy(),delete t.shadow,delete t.shadowGroup)})}return m.defaultOptions=g(c.defaultOptions,{borderWidth:0}),p(m,"afterRender",function(){const n=this,h=n.options.paths,l=/url\(([^)]+)\)/;n.points.forEach(function(t){if(t.graphic&&t.shapeArgs&&h){const e=h[t.index%h.length],i=t.graphic.attr("fill"),r=i&&i.match(l),{y:s,height:a}=M(n.yAxis,e);if(r&&n.chart.renderer.patternElements){const o=n.chart.renderer.patternElements[r[1].slice(1)];o&&o.animate({x:t.shapeArgs.x,y:s,width:t.shapeArgs.width||0,height:a})}S(t.graphic,M(n.yAxis,e).height,t.shapeArgs.width||0,t.shapeArgs.height||1/0,n.options.borderWidth||0)}})}),p(i,"render",function(){w(this,x)}),p(n,"afterSetOffset",function(t){var e,i,r;this.shadow&&({chart:r,len:e}=this.axis,{xOffset:t,width:i}=t,t=r.inverted?t-r.xAxis[0].len:t,r=r.inverted?-e:0,this.shadow.attr({translateX:t,translateY:r}),this.shadow.animate({width:i}))}),p(i,"afterDrilldown",function(){y(this)}),p(i,"afterDrillUp",function(){y(this)}),m.prototype.pointClass=r,o.registerSeriesType("pictorial",m),m}),e(t,"masters/modules/pictorial.src.js",[t["Core/Globals.js"]],function(t){return t})});