!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/organization",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(s){"use strict";var t=s?s._modules:{};function e(t,e,i,n){t.hasOwnProperty(e)||(t[e]=n.apply(null,i),"function"==typeof CustomEvent&&s.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/Organization/OrganizationPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var{pointClass:t}=t.seriesTypes["sankey"]["prototype"];const{defined:i,find:o,pick:r}=e;class n extends t{constructor(t,e,i){super(t,e,i),this.isNode||(this.dataLabelOnNull=!0,this.formatPrefix="link")}getSum(){return 1}setNodeColumn(){super.setNodeColumn();const n=this,s=n.getFromNode().fromNode;if(!i(n.options.column)&&0!==n.linksTo.length&&s&&"hanging"===s.options.layout){let i=-1,e;n.options.layout=r(n.options.layout,"hanging"),n.hangsFrom=s,o(s.linksFrom,(t,e)=>{t=t.toNode===n;return t&&(i=e),t});for(let t=0;t<s.linksFrom.length;++t)(e=s.linksFrom[t]).toNode.id===n.id?t=s.linksFrom.length:i+=function e(t){let i=t.linksFrom.length;return t.linksFrom.forEach(t=>{t.id===t.toNode.linksTo[0].id?i+=e(t.toNode):i--}),i}(e.toNode);n.column=(n.column||0)+i}}}return n}),e(t,"Series/Organization/OrganizationSeriesDefaults.js",[],function(){return{borderColor:"#666666",borderRadius:3,link:{color:"#666666",lineWidth:1,radius:10,type:"default"},borderWidth:1,dataLabels:{nodeFormatter:function(){const t={width:"100%",height:"100%",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"},e={"max-height":"100%","border-radius":"50%"},i={width:"100%",padding:0,"text-align":"center","white-space":"normal"};function n(i){return Object.keys(i).reduce(function(t,e){return t+e+":"+i[e]+";"},'style="')+'"'}var{description:s,image:o,title:r}=this.point;o&&(e["max-width"]="30%",i.width="70%"),this.series.chart.renderer.forExport&&(t.display="block",i.position="absolute",i.left=o?"30%":0,i.top=0);let a="<div "+n(t)+">";return o&&(a+='<img src="'+o+'" '+n(e)+">"),a+="<div "+n(i)+">",this.point.name&&(a+="<h4 "+n({margin:0})+">"+this.point.name+"</h4>"),r&&(a+="<p "+n({margin:0})+">"+(r||"")+"</p>"),s&&(a+="<p "+n({opacity:.75,margin:"5px"})+">"+s+"</p>"),a+="</div></div>"},style:{fontWeight:"normal",fontSize:"0.9em"},useHTML:!0,linkTextPath:{attributes:{startOffset:"95%",textAnchor:"end"}}},hangingIndent:20,hangingIndentTranslation:"inherit",hangingSide:"left",minNodeLength:10,nodeWidth:50,tooltip:{nodeFormat:"{point.name}<br>{point.title}<br>{point.description}"}}}),e(t,"Series/PathUtilities.js",[],function(){function l(e,i){const n=[];for(let t=0;t<e.length;t++){var s,o,r,a,h,l,d=e[t][1],p=e[t][2];"number"==typeof d&&"number"==typeof p&&(0===t?n.push(["M",d,p]):t!==e.length-1&&i?(o=e[t-1],a=e[t+1],o&&a&&(s=o[1],o=o[2],r=a[1],a=a[2],"number"==typeof s&&"number"==typeof r&&"number"==typeof o&&"number"==typeof a&&s!==r&&o!==a&&(h=s<r?1:-1,l=o<a?1:-1,n.push(["L",d-h*Math.min(Math.abs(d-s),i),p-l*Math.min(Math.abs(p-o),i)],["C",d,p,d,p,d+h*Math.min(Math.abs(d-r),i),p+l*Math.min(Math.abs(p-a),i)])))):n.push(["L",d,p]))}return n}return{applyRadius:l,getLinkPath:{default:function(t){var{x1:t,y1:e,x2:i,y2:n,width:s=0,inverted:o=!1,radius:r,parentVisible:a}=t,h=[["M",t,e],["L",t,e],["C",t,e,t,n,t,n],["L",t,n],["C",t,e,t,n,t,n],["L",t,n]];return a?l([["M",t,e],["L",t+s*(o?-.5:.5),e],["L",t+s*(o?-.5:.5),n],["L",i,n]],r):h},straight:function(t){var{x1:t,y1:e,x2:i,y2:n,width:s=0,inverted:o=!1,parentVisible:r}=t;return r?[["M",t,e],["L",t+s*(o?-1:1),n],["L",i,n]]:[["M",t,e],["L",t,n],["L",t,n]]},curved:function(t){var{x1:t,y1:e,x2:i,y2:n,offset:s=0,width:o=0,inverted:r=!1,parentVisible:a}=t;return a?[["M",t,e],["C",t+s,e,t-s+o*(r?-1:1),n,t+o*(r?-1:1),n],["L",i,n]]:[["M",t,e],["C",t,e,t,n,t,n],["L",i,n]]}}}}),e(t,"Series/Organization/OrganizationSeries.js",[t["Series/Organization/OrganizationPoint.js"],t["Series/Organization/OrganizationSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Series/PathUtilities.js"],t["Core/Utilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Extensions/TextPath.js"]],function(t,e,i,k,n,s,o){const g=i.seriesTypes["sankey"],{css:r,crisp:y,extend:a,isNumber:u,merge:f,pick:b}=n;o.compose(s);class h extends g{alignDataLabel(i,n,s){i=i.shapeArgs;if(s.useHTML&&i){s=this.options.borderWidth+2*this.options.dataLabels.padding;let t=i.width||0,e=i.height||0;this.chart.inverted&&(t=e,e=i.width||0),e-=s,t-=s;i=n.text;i&&(r(i.element.parentNode,{width:t+"px",height:e+"px"}),r(i.element,{left:0,top:0,width:"100%",height:"100%",overflow:"hidden"})),n.getBBox=()=>({width:t,height:e,x:0,y:0}),n.width=t,n.height=e}super.alignDataLabel.apply(this,arguments)}createNode(t){const e=super.createNode.call(this,t);return e.getSum=()=>1,e}pointAttribs(t,e){const i=this,n=g.prototype.pointAttribs.call(i,t,e),s=(t.isNode?t:t.fromNode).level,o=i.mapOptionsToLevel[s||0]||{},r=t.options,a=o.states&&o.states[e]||{},h=b(a.borderRadius,r.borderRadius,o.borderRadius,i.options.borderRadius),l=b(a.linkColor,r.linkColor,o.linkColor,i.options.linkColor,a.link&&a.link.color,r.link&&r.link.color,o.link&&o.link.color,i.options.link&&i.options.link.color),d=b(a.linkLineWidth,r.linkLineWidth,o.linkLineWidth,i.options.linkLineWidth,a.link&&a.link.lineWidth,r.link&&r.link.lineWidth,o.link&&o.link.lineWidth,i.options.link&&i.options.link.lineWidth),p=b(a.linkOpacity,r.linkOpacity,o.linkOpacity,i.options.linkOpacity,a.link&&a.link.linkOpacity,r.link&&r.link.linkOpacity,o.link&&o.link.linkOpacity,i.options.link&&i.options.link.linkOpacity);return t.isNode?u(h)&&(n.r=h):(n.stroke=l,n["stroke-width"]=d,n.opacity=p,delete n.fill),n}translateLink(o){var r=this.chart,a=this.options,h=o.fromNode,l=o.toNode,d=b(a.linkLineWidth,a.link.lineWidth,0),p=b(a.link.offset,.5),g=b(o.options.link&&o.options.link.type,a.link.type);if(h.shapeArgs&&l.shapeArgs){var u=a.hangingIndent,c="right"===a.hangingSide,f=l.options.offset,f=/%$/.test(f)&&parseInt(f,10),m=r.inverted;let t=y((h.shapeArgs.x||0)+(h.shapeArgs.width||0),d),e=y((h.shapeArgs.y||0)+(h.shapeArgs.height||0)/2,d),i=y(l.shapeArgs.x||0,d),n=y((l.shapeArgs.y||0)+(l.shapeArgs.height||0)/2,d),s;m&&(t-=h.shapeArgs.width||0,i+=l.shapeArgs.width||0),s=this.colDistance?y(i+(m?1:-1)*(this.colDistance-this.nodeWidth)/2,d):y((i+t)/2,d),f&&(50<=f||f<=-50)&&(s=i=y(i+(m?-.5:.5)*(l.shapeArgs.width||0),d),n=l.shapeArgs.y||0,0<f&&(n+=l.shapeArgs.height||0)),l.hangsFrom===h&&(r.inverted?(e=c?y((h.shapeArgs.y||0)+u/2,d):y((h.shapeArgs.y||0)+(h.shapeArgs.height||0)-u/2,d),n=c?(l.shapeArgs.y||0)+u/2:(l.shapeArgs.y||0)+(l.shapeArgs.height||0)):e=y((h.shapeArgs.y||0)+u/2,d),s=i=y((l.shapeArgs.x||0)+(l.shapeArgs.width||0)/2,d)),o.plotX=s,o.plotY=(e+n)/2,o.shapeType="path","straight"===g?o.shapeArgs={d:[["M",t,e],["L",i,n]]}:"curved"===g?(f=Math.abs(i-t)*p*(m?-1:1),o.shapeArgs={d:[["M",t,e],["C",t+f,e,i-f,n,i,n]]}):o.shapeArgs={d:k.applyRadius([["M",t,e],["L",s,e],["L",s,n],["L",i,n]],b(a.linkRadius,a.link.radius))},o.dlBox={x:(t+i)/2,y:(e+n)/2,height:d,width:0}}}translateNode(t,e){super.translateNode(t,e);const i=this.chart,n=this.options,s=t.getSum(),o=this.translationFactor,r=Math.max(Math.round(s*o),n.minLinkWidth||0),a="right"===n.hangingSide,h=n.hangingIndent||0,l=n.hangingIndentTranslation,d=n.minNodeLength||10,p=Math.round(this.nodeWidth),g=t.shapeArgs,u=i.inverted?-1:1;let c=t.hangsFrom;if(c)if("cumulative"===l)for(g.height-=h,i.inverted&&!a&&(g.y-=u*h);c;)g.y+=(a?1:u)*h,c=c.hangsFrom;else if("shrink"===l)for(;c&&g.height>h+d;)g.height-=h,i.inverted&&!a||(g.y+=h),c=c.hangsFrom;else g.height-=h,i.inverted&&!a||(g.y+=h);t.nodeHeight=i.inverted?g.width:g.height,t.shapeArgs&&!t.hangsFrom&&(t.shapeArgs=f(t.shapeArgs,{x:(t.shapeArgs.x||0)+p/2-(t.shapeArgs.width||0)/2,y:(t.shapeArgs.y||0)+r/2-(t.shapeArgs.height||0)/2}))}drawDataLabels(){var t=this.options.dataLabels;if(t.linkTextPath&&t.linkTextPath.enabled)for(const e of this.points)e.options.dataLabels=f(e.options.dataLabels,{useHTML:!1});super.drawDataLabels()}}return h.defaultOptions=f(g.defaultOptions,e),a(h.prototype,{pointClass:t}),i.registerSeriesType("organization",h),h}),e(t,"masters/modules/organization.src.js",[t["Core/Globals.js"]],function(t){return t})});