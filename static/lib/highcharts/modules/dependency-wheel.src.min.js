!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(a){"use strict";var e=a?a._modules:{};function t(e,t,n,s){e.hasOwnProperty(t)||(e[t]=s.apply(null,n),"function"==typeof CustomEvent&&a.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/DependencyWheel/DependencyWheelPoint.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){var{pointClass:e}=e.seriesTypes["sankey"]["prototype"];const{pInt:i,wrap:d}=t;class n extends e{getDataLabelPath(e){const t=this,n=t.series.chart.renderer,s=t.shapeArgs,a=t.angle<0||t.angle>Math.PI,o=s.start||0,r=s.end||0;return t.dataLabelPath?(t.dataLabelPath=t.dataLabelPath.destroy(),delete t.dataLabelPath):d(e,"destroy",function(e){return t.dataLabelPath&&(t.dataLabelPath=t.dataLabelPath.destroy()),e.call(this)}),t.dataLabelPath=n.arc({open:!0,longArc:Math.abs(Math.abs(o)-Math.abs(r))<Math.PI?0:1}).attr({x:s.x,y:s.y,r:(s.r||0)+i(e.options?.distance||0),start:a?o:r,end:a?r:o,clockwise:+a}).add(n.defs),t.dataLabelPath}isValid(){return!0}}return n}),t(e,"Series/DependencyWheel/DependencyWheelSeriesDefaults.js",[],function(){return{center:[null,null],curveFactor:.6,startAngle:0,dataLabels:{textPath:{enabled:!1,attributes:{dy:5}}}}}),t(e,"Series/DependencyWheel/DependencyWheelSeries.js",[e["Core/Animation/AnimationUtilities.js"],e["Series/DependencyWheel/DependencyWheelPoint.js"],e["Series/DependencyWheel/DependencyWheelSeriesDefaults.js"],e["Core/Globals.js"],e["Series/Sankey/SankeyColumnComposition.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"],e["Core/Renderer/SVG/SVGElement.js"],e["Extensions/TextPath.js"]],function(e,t,n,s,a,o,r,i,d){const c=e["animObject"],m=s["deg2rad"];var{pie:e,sankey:s}=o.seriesTypes;const{extend:l,merge:h,relativeLength:b}=r;d.compose(i);class p extends s{animate(e){var t=this;if(!e){const n=c(t.options.animation).duration,s=n/2/t.nodes.length;let e=0;for(const a of t.nodes){const o=a.graphic;o&&(o.attr({opacity:0}),setTimeout(()=>{a.graphic&&a.graphic.animate({opacity:1},{duration:s})},s*e++))}for(const r of t.points){const i=r.graphic;!r.isNode&&i&&i.attr({opacity:0}).animate({opacity:1},t.options.animation)}}}createNode(e){const r=super.createNode(e);return r.getSum=()=>r.linksFrom.concat(r.linksTo).reduce((e,t)=>e+t.weight,0),r.offset=t=>{const n=e=>e.fromNode===r?e.toNode:e.fromNode;let s=0,a=r.linksFrom.concat(r.linksTo),o;a.sort((e,t)=>n(e).index-n(t).index);for(let e=0;e<a.length;e++)if(n(a[e]).index>r.index){a=a.slice(0,e).reverse().concat(a.slice(e).reverse()),o=!0;break}o||a.reverse();for(let e=0;e<a.length;e++){if(a[e]===t)return s;s+=a[e].weight}},r}createNodeColumns(){const e=[a.compose([],this)];for(const t of this.nodes)t.column=0,e[0].push(t);return e}getNodePadding(){return this.options.nodePadding/Math.PI}translate(){const r=this.options,i=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),e=this.getCenter(),d=(r.startAngle-90)*m,t=r.borderRadius,n="object"==typeof t?t.radius:t;super.translate();for(const a of this.nodeColumns[0])if(a.sum){const o=a.shapeArgs,c=e[0],l=e[1],h=e[2]/2,p="auto"===r.nodeWidth?20:r.nodeWidth,u=h-b(p||0,h),y=d+i*(o.y||0),f=d+i*((o.y||0)+(o.height||0));a.angle=y+(f-y)/2,a.shapeType="arc",a.shapeArgs={x:c,y:l,r:h,innerR:u,start:y,end:f,borderRadius:n},a.dlBox={x:c+Math.cos((y+f)/2)*(h+u)/2,y:l+Math.sin((y+f)/2)*(h+u)/2,width:1,height:1};for(const g of a.linksFrom)if(g.linkBase){let a,o;var s=g.linkBase.map((e,t)=>{var e=i*e,n=Math.cos(d+e)*(1+u),s=Math.sin(d+e)*(1+u);return a=r.curveFactor||0,(o=Math.abs(g.linkBase[3-t]*i-e))>Math.PI&&(o=2*Math.PI-o),(o*=u)<u&&(a*=o/u),{x:c+n,y:l+s,cpX:c+(1-a)*n,cpY:l+(1-a)*s}});g.shapeArgs={d:[["M",s[0].x,s[0].y],["A",u,u,0,0,1,s[1].x,s[1].y],["C",s[1].cpX,s[1].cpY,s[2].cpX,s[2].cpY,s[2].x,s[2].y],["A",u,u,0,0,1,s[3].x,s[3].y],["C",s[3].cpX,s[3].cpY,s[0].cpX,s[0].cpY,s[0].x,s[0].y]]}}}}}return p.defaultOptions=h(s.defaultOptions,n),l(p.prototype,{orderNodes:!1,getCenter:e.prototype.getCenter}),p.prototype.pointClass=t,o.registerSeriesType("dependencywheel",p),p}),t(e,"masters/modules/dependency-wheel.src.js",[e["Core/Globals.js"]],function(e){return e})});