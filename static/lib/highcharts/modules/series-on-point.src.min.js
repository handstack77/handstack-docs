!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/series-on-point",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(o){"use strict";var t=o?o._modules:{};function e(t,e,s,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,s),"function"==typeof CustomEvent&&o.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/SeriesOnPointComposition.js",[t["Core/Globals.js"],t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,u,e,s,l,i){const h=t["composed"],o=s.seriesTypes["bubble"],{addEvent:d,defined:m,find:r,isNumber:n,pushUnique:p}=i;var a;{(t=a=a||{}).compose=function(t,e){var s,i,o,r,n,a;return p(h,"SeriesOnPoint")&&({chartGetZData:s,seriesAfterInit:i,seriesAfterRender:o,seriesGetCenter:r,seriesShowOrHide:n,seriesTranslate:a}=c.prototype,t.types.pie.prototype.onPointSupported=!0,d(t,"afterInit",i),d(t,"afterRender",o),d(t,"afterGetCenter",r),d(t,"hide",n),d(t,"show",n),d(t,"translate",a),d(e,"beforeRender",s),d(e,"beforeRedraw",s)),t};class c{constructor(t){this.getRadii=o.prototype.getRadii,this.getRadius=o.prototype.getRadius,this.getPxExtremes=o.prototype.getPxExtremes,this.getZExtremes=o.prototype.getZExtremes,this.chart=t.chart,this.series=t,this.options=t.options.onPoint}drawConnector(){this.connector||(this.connector=this.series.chart.renderer.path().addClass("highcharts-connector-seriesonpoint").attr({zIndex:-1}).add(this.series.markerGroup));var t=this.getConnectorAttributes();t&&this.connector.animate(t)}getConnectorAttributes(){const t=this.series.chart,e=this.options;if(e){var s=e.connectorOptions||{},i=e.position,o=t.get(e.id);if(o instanceof u&&i&&m(o.plotX)&&m(o.plotY)){const r=m(i.x)?i.x:o.plotX,n=m(i.y)?i.y:o.plotY,a=r+(i.offsetX||0),h=n+(i.offsetY||0),d=s.width||1,p=s.stroke||this.series.color,c=s.dashstyle,f={d:l.prototype.crispLine([["M",r,n],["L",a,h]],d),"stroke-width":d};return t.styledMode||(f.stroke=p,f.dashstyle=c),f}}}seriesAfterInit(){this.onPointSupported&&this.options.onPoint&&(this.bubblePadding=!0,this.useMapGeometry=!0,this.onPoint=new c(this))}seriesAfterRender(){delete this.chart.bubbleZExtremes,this.onPoint&&this.onPoint.drawConnector()}seriesGetCenter(t){const e=this.options.onPoint,s=t.positions;e&&((i=this.chart.get(e.id))instanceof u&&m(i.plotX)&&m(i.plotY)&&(s[0]=i.plotX,s[1]=i.plotY),(i=e.position)&&(m(i.x)&&(s[0]=i.x),m(i.y)&&(s[1]=i.y),i.offsetX&&(s[0]+=i.offsetX),i.offsetY&&(s[1]+=i.offsetY)));var i=this.radii&&this.radii[this.index];n(i)&&(s[2]=2*i),t.positions=s}seriesShowOrHide(){const s=this.chart.series;this.points?.forEach(e=>{const t=r(s,t=>{t=((t.onPoint||{}).options||{}).id;return!!t&&t===e.id});t&&t.setVisible(!t.visible,!1)})}seriesTranslate(){this.onPoint&&(this.onPoint.getRadii(),this.radii=this.onPoint.radii)}chartGetZData(){const e=[];this.series.forEach(t=>{t=t.options.onPoint;e.push(t&&t.z?t.z:null)}),this.series.forEach(t=>{t.onPoint&&(t.onPoint.zData=t.zData=e)})}}t.Additions=c}return a}),e(t,"masters/modules/series-on-point.src.js",[t["Core/Globals.js"],t["Series/SeriesOnPointComposition.js"]],function(t,e){return e.compose(t.Series,t.Chart),t})});