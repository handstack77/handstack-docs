!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/windbarb",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(r){"use strict";var t=r?r._modules:{};function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o),"function"==typeof CustomEvent&&r.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),e(t,"Series/OnSeriesComposition.js",[t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(t,e,o,i){const r=e["composed"],X=t["prototype"],s=o["prototype"],{defined:G,pushUnique:n,stableSort:O}=i;var a;function l(t){return s.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this,t)}function p(){X.translate.apply(this);const i=this,t=i.options,e=i.chart,r=i.points,o=t.onSeries,s=o&&e.get(o),n=s&&s.options.step,a=s&&s.points,l=e.inverted,p=i.xAxis,h=i.yAxis;let u=r.length-1,c,d,f=t.onKey||"y",b=a&&a.length,g=0,m,x,y,v,S;if(s&&s.visible&&b)for(g=(s.pointXOffset||0)+(s.barW||0)/2,v=s.currentDataGrouping,x=a[b-1].x+(v?v.totalRange:0),O(r,(t,e)=>t.x-e.x),f="plot"+f[0].toUpperCase()+f.substr(1);b--&&r[u];)if(m=a[b],(c=r[u]).y=m.y,m.x<=c.x&&void 0!==m[f]){if(c.x<=x&&(c.plotY=m[f],m.x<c.x&&!n&&(y=a[b+1])&&void 0!==y[f]))if(G(c.plotX)&&s.is("spline")){const L=[m.plotX||0,m.plotY||0],w=[y.plotX||0,y.plotY||0],W=m.controlPoints?.high||L,k=y.controlPoints?.low||w,A=(t,e)=>Math.pow(1-t,3)*L[e]+3*(1-t)*(1-t)*t*W[e]+3*(1-t)*t*t*k[e]+t*t*t*w[e];let e=0,o=1,i;for(let t=0;t<100;t++){var j=(e+o)/2,C=A(j,0);if(null===C)break;if(Math.abs(C-c.plotX)<.25){i=j;break}C<c.plotX?e=j:o=j}G(i)&&(c.plotY=A(i,1),c.y=h.toValue(c.plotY,!0))}else S=(c.x-m.x)/(y.x-m.x),c.plotY+=S*(y[f]-m[f]),c.y+=S*(y.y-m.y);if(u--,b++,u<0)break}r.forEach((t,e)=>{let o;t.plotX+=g,void 0!==t.plotY&&!l||(0<=t.plotX&&t.plotX<=p.len?l?(t.plotY=p.translate(t.x,0,1,0,1),t.plotX=G(t.y)?h.translate(t.y,0,0,0,1):0):t.plotY=(p.opposite?0:i.yAxis.len)+p.offset:t.shapeArgs={}),(d=r[e-1])&&d.plotX===t.plotX&&(void 0===d.stackIndex&&(d.stackIndex=0),o=d.stackIndex+1),t.stackIndex=o}),this.onSeries=s}return(e=a=a||{}).compose=function(t){if(n(r,"OnSeries")){const e=t.prototype;e.getPlotBox=l,e.translate=p}return t},e.getPlotBox=l,e.translate=p,a}),e(t,"Series/Windbarb/WindbarbPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Utilities.js"]],function(t,e){const o=e["isNumber"];class i extends t.prototype.pointClass{isValid(){return o(this.value)&&0<=this.value}}return i}),e(t,"Series/Windbarb/WindbarbSeriesDefaults.js",[],function(){return{dataGrouping:{enabled:!0,approximation:"windbarb",groupPixelWidth:30},lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> {series.name}: <b>{point.value}</b> ({point.beaufort})<br/>'},vectorLength:20,colorKey:"value",yOffset:-20,xOffset:0}}),e(t,"Series/Windbarb/WindbarbSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Globals.js"],t["Series/OnSeriesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Series/Windbarb/WindbarbPoint.js"],t["Series/Windbarb/WindbarbSeriesDefaults.js"]],function(t,e,n,r,o,i,s,a){const l=t["animObject"];t=o.seriesTypes.column;const{extend:p,merge:h,pick:u}=i;class c extends t{init(t,e){super.init(t,e)}pointAttribs(t,e){var o=this.options;let i=t.color||this.color,r=this.options.lineWidth;return e&&(i=o.states[e].color||i,r=(o.states[e].lineWidth||r)+(o.states[e].lineWidthPlus||0)),{stroke:i,"stroke-width":r}}windArrow(t){var e=t.beaufortLevel,o=this.options.vectorLength/20;let i=1.943844*t.value,r,s=-10;if(t.isNull)return[];if(0===e)return this.chart.renderer.symbols.circle(-10*o,-10*o,20*o,20*o);const n=[["M",0,7*o],["L",-1.5*o,7*o],["L",0,10*o],["L",1.5*o,7*o],["L",0,7*o],["L",0,-10*o]];if(0<(r=(i-i%50)/50))for(;r--;)n.push(-10===s?["L",0,s*o]:["M",0,s*o],["L",5*o,s*o+2],["L",0,s*o+4]),i-=50,s+=7;if(0<(r=(i-i%10)/10))for(;r--;)n.push(-10===s?["L",0,s*o]:["M",0,s*o],["L",7*o,s*o]),i-=10,s+=3;if(0<(r=(i-i%5)/5))for(;r--;)n.push(-10===s?["L",0,s*o]:["M",0,s*o],["L",4*o,s*o]),i-=5,s+=3;return n}drawPoints(){const t=this.chart,e=this.yAxis,o=t.inverted,i=this.options.vectorLength/2;for(const n of this.points){var r=n.plotX,s=n.plotY;!1===this.options.clip||t.isInsidePlot(r,0)?(n.graphic||(n.graphic=this.chart.renderer.path().add(this.markerGroup).addClass("highcharts-point highcharts-color-"+u(n.colorIndex,n.series.colorIndex))),n.graphic.attr({d:this.windArrow(n),translateX:r+this.options.xOffset,translateY:s+this.options.yOffset,rotation:n.direction}),this.chart.styledMode||n.graphic.attr(this.pointAttribs(n))):n.graphic&&(n.graphic=n.graphic.destroy()),n.tooltipPos=[r+this.options.xOffset+(o&&!this.onSeries?i:0),s+this.options.yOffset-(o?0:i+e.pos-t.plotTop)]}}animate(t){t?this.markerGroup.attr({opacity:.01}):this.markerGroup.animate({opacity:1},l(this.options.animation))}markerAttribs(){return{}}getExtremes(){return{}}shouldShowTooltip(t,e,o={}){return o.ignoreX=this.chart.inverted,o.ignoreY=!o.ignoreX,super.shouldShowTooltip(t,e,o)}}return c.defaultOptions=h(t.defaultOptions,a),r.compose(c),p(c.prototype,{beaufortFloor:[0,.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],beaufortName:["Calm","Light air","Light breeze","Gentle breeze","Moderate breeze","Fresh breeze","Strong breeze","Near gale","Gale","Strong gale","Storm","Violent storm","Hurricane"],invertible:!1,parallelArrays:["x","value","direction"],pointArrayMap:["value","direction"],pointClass:s,trackerGroups:["markerGroup"],translate:function(){var e=this.beaufortFloor,o=this.beaufortName;r.translate.call(this);for(const i of this.points){let t=0;for(;t<e.length&&!(e[t]>i.value);t++);i.beaufortLevel=t-1,i.beaufort=o[t-1]}}}),o.registerSeriesType("windbarb",c),e.windbarb||(e.windbarb=(o,i)=>{let r=0,s=0;for(let t=0,e=o.length;t<e;t++)r+=o[t]*Math.cos(i[t]*n.deg2rad),s+=o[t]*Math.sin(i[t]*n.deg2rad);return[o.reduce((t,e)=>t+e,0)/o.length,Math.atan2(s,r)/n.deg2rad]}),c}),e(t,"masters/modules/windbarb.src.js",[t["Core/Globals.js"]],function(t){return t})});