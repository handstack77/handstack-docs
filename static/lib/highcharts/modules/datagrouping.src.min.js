!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/modules/datagrouping",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(i){"use strict";var t=i?i._modules:{};function o(t,o,a,e){t.hasOwnProperty(o)||(t[o]=e.apply(null,a),"function"==typeof CustomEvent&&i.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:o,module:t[o]}})))}o(t,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),o(t,"Extensions/DataGrouping/ApproximationDefaults.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Utilities.js"]],function(i,t){const{arrayMax:o,arrayMin:a,correctFloat:e,extend:n,isNumber:r}=t;function s(t){var o=t.length;let a=p(t);return a=r(a)&&o?e(a/o):a}function p(t){let o=t.length,a;if(!o&&t.hasNulls)a=null;else if(o)for(a=0;o--;)a+=t[o];return a}t={average:s,averages:function(){const o=[];return[].forEach.call(arguments,function(t){o.push(s(t))}),void 0===o[0]?void 0:o},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},high:function(t){return t.length?o(t):t.hasNulls?null:void 0},hlc:function(t,o,a){if(t=i.high(t),o=i.low(o),a=i.close(a),r(t)||r(o)||r(a))return[t,o,a]},low:function(t){return t.length?a(t):t.hasNulls?null:void 0},ohlc:function(t,o,a,e){if(t=i.open(t),o=i.high(o),a=i.low(a),e=i.close(e),r(t)||r(o)||r(a)||r(e))return[t,o,a,e]},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},range:function(t,o){return t=i.low(t),o=i.high(o),r(t)||r(o)?[t,o]:null===t&&null===o?null:void 0},sum:p};return n(i,t),t}),o(t,"Extensions/DataGrouping/DataGroupingDefaults.js",[],function(){return{common:{groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %e %b, %H:%M:%S.%L","%A, %e %b, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %e %b, %H:%M:%S","%A, %e %b, %H:%M:%S","-%H:%M:%S"],minute:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],hour:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],day:["%A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],week:["Week from %A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},seriesSpecific:{line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5},hlc:{groupPixelWidth:5},heikinashi:{groupPixelWidth:10}},units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}}),o(t,"Extensions/DataGrouping/DataGroupingAxisComposition.js",[t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Utilities.js"]],function(r,t){const{addEvent:a,extend:e,merge:i,pick:s}=t;let n;function p(o){const a=this,t=a.series;t.forEach(function(t){t.groupPixelWidth=void 0}),t.forEach(function(t){t.groupPixelWidth=a.getGroupPixelWidth&&a.getGroupPixelWidth(),t.groupPixelWidth&&(t.hasProcessed=!0),t.applyGrouping(!!o.hasExtremesChanged)})}function u(){var t=this.series;let o=t.length,a=0,e=!1,i,n;for(;o--;)(n=t[o].options.dataGrouping)&&(a=Math.max(a,s(n.groupPixelWidth,r.common.groupPixelWidth)),i=(t[o].processedXData||t[o].data).length,(t[o].groupPixelWidth||i>this.chart.plotSizeX/a||i&&n.forced)&&(e=!0));return e?a:0}function l(){this.series.forEach(function(t){t.hasProcessed=!1})}function g(o,t){let a;if(t=s(t,!0),o=o||{forced:!1,units:null},this instanceof n)for(a=this.series.length;a--;)this.series[a].update({dataGrouping:o},!1);else this.chart.options.series.forEach(function(t){t.dataGrouping="boolean"==typeof o?o:i(o,t.dataGrouping)});this.ordinal&&(this.ordinal.slope=void 0),t&&this.chart.redraw()}return{compose:function(t){var o=(n=t).prototype;o.applyGrouping||(a(t,"afterSetScale",l),a(t,"postProcessData",p),e(o,{applyGrouping:p,getGroupPixelWidth:u,setDataGrouping:g}))}}}),o(t,"Extensions/DataGrouping/DataGroupingSeriesComposition.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Defaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(P,Y,N,s,t,o){const{prototype:O}=t["series"],{addEvent:e,defined:w,error:R,extend:i,isNumber:I,merge:j,pick:L}=o,a=O.generatePoints;function n(n){const r=this,s=r.chart,t=r.options,p=t.dataGrouping,o=!1!==r.allowDG&&p&&L(p.enabled,s.options.isStock),u=r.reserveSpace(),a=this.currentDataGrouping;let l,g,e=!1;o&&!r.requireSorting&&(r.requireSorting=e=!0);var d=!1==(n=n,!((d=r).isCartesian&&!d.isDirty&&!d.xAxis.isDirty&&!d.yAxis.isDirty&&!n))||!o;if(e&&(r.requireSorting=!1),!d){r.destroyGroupedData();const A=p.groupAll?r.xData:r.processedXData,v=p.groupAll?r.yData:r.processedYData,S=s.plotSizeX,b=r.xAxis,E=b.options.ordinal,P=r.groupPixelWidth;let e,i;if(P&&A&&A.length&&S){i=!0,r.isDirty=!0,r.points=null;const j=b.getExtremes(),C=j.min,W=j.max,k=E&&b.ordinal&&b.ordinal.getGroupIntervalFactor(C,W,r)||1,H=P*(W-C)/S*k,F=b.getTimeTicks(N.Additions.prototype.normalizeTimeTickInterval(H,p.units||Y.units),Math.min(C,A[0]),Math.max(W,A[A.length-1]),b.options.startOfWeek,A,r.closestPointRange),T=O.groupData.apply(r,[A,v,F,p.approximation]);let t=T.groupedXData,o=T.groupedYData,a=0;for(p&&p.smoothed&&t.length&&(p.firstAnchor="firstPoint",p.anchor="middle",p.lastAnchor="lastPoint",R(32,!1,s,{"dataGrouping.smoothed":"use dataGrouping.anchor"})),e=1;e<F.length;e++)F.info.segmentStarts&&-1!==F.info.segmentStarts.indexOf(e)||(a=Math.max(F[e]-F[e-1],a));(l=F.info).gapSize=a,r.closestPointRange=F.info.totalRange,r.groupMap=T.groupMap,r.currentDataGrouping=l;var n=r,h=t,d=W,c=n.options.dataGrouping,m=n.currentDataGrouping&&n.currentDataGrouping.gapSize;if(c&&n.xData&&m&&n.groupMap){var f=h.length-1,x=c.anchor,D=c.firstAnchor,c=c.lastAnchor;let t=h.length-1,o=0;if(D&&n.xData[0]>=h[0]){o++;var G=n.groupMap[0].start,y=n.groupMap[0].length;let t;I(G)&&I(y)&&(t=G+(y-1)),h[0]={start:h[0],middle:h[0]+.5*m,end:h[0]+m,firstPoint:n.xData[0],lastPoint:t&&n.xData[t]}[D]}if(0<f&&c&&m&&h[f]>=d-m&&(t--,G=n.groupMap[n.groupMap.length-1].start,h[f]={start:h[f],middle:h[f]+.5*m,end:h[f]+m,firstPoint:G&&n.xData[G],lastPoint:n.xData[n.xData.length-1]}[c]),x&&"start"!==x)for(var M=m*{middle:.5,end:1}[x];t>=o;)h[t]+=M,t--}u&&(y=b,D=t,w(D[0])&&I(y.min)&&I(y.dataMin)&&D[0]<y.min&&((!w(y.options.min)&&y.min<=y.dataMin||y.min===y.dataMin)&&(y.min=Math.min(D[0],y.min)),y.dataMin=Math.min(D[0],y.dataMin)),w(D[D.length-1])&&I(y.max)&&I(y.dataMax)&&D[D.length-1]>y.max&&((!w(y.options.max)&&I(y.dataMax)&&y.max>=y.dataMax||y.max===y.dataMax)&&(y.max=Math.max(D[D.length-1],y.max)),y.dataMax=Math.max(D[D.length-1],y.dataMax))),p.groupAll&&(r.allGroupedData=o,g=r.cropData(t,o,b.min,b.max),t=g.xData,o=g.yData,r.cropStart=g.start),r.processedXData=t,r.processedYData=o}else r.groupMap=null,r.currentDataGrouping=void 0;r.hasGroupedData=i,r.preventGraphAnimation=(a&&a.totalRange)!==(l&&l.totalRange)}}function r(){this.groupedData&&(this.groupedData.forEach(function(t,o){t&&(this.groupedData[o]=t.destroy?t.destroy():null)},this),this.groupedData.length=0,delete this.allGroupedData)}function p(){a.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null}function u(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("hlc")?"hlc":this.is("column")||this.options.cumulative?"sum":"average"}function l(o,a,e,t){const i=this,n=i.data,r=i.options&&i.options.data,s=[],p=[],u=[],l=o.length,g=!!a,d=[],h=i.pointArrayMap,c=h&&h.length,m=["x"].concat(h||["y"]),f=this.options.dataGrouping&&this.options.dataGrouping.groupAll;let x,D,G,y=0,M=0;const A="function"==typeof t?t:t&&P[t]?P[t]:P[i.getDGApproximation&&i.getDGApproximation()||"average"];if(c){let t=h.length;for(;t--;)d.push([])}else d.push([]);var v=c||1;for(let t=0;t<=l;t++)if(!(o[t]<e[0])){for(;void 0!==e[y+1]&&o[t]>=e[y+1]||t===l;){x=e[y],i.dataGroupInfo={start:f?M:i.cropStart+M,length:d[0].length,groupStart:x},G=A.apply(i,d),i.pointClass&&!w(i.dataGroupInfo.options)&&(i.dataGroupInfo.options=j(i.pointClass.prototype.optionsToObject.call({series:i},i.options.data[i.cropStart+M])),m.forEach(function(t){delete i.dataGroupInfo.options[t]})),void 0!==G&&(s.push(x),p.push(G),u.push(i.dataGroupInfo)),M=t;for(let t=0;t<v;t++)d[t].length=0,d[t].hasNulls=!1;if(y+=1,t===l)break}if(t===l)break;if(h){var S,b=i.options.dataGrouping&&i.options.dataGrouping.groupAll?t:i.cropStart+t,E=n&&n[b]||i.pointClass.prototype.applyOptions.apply({series:i},[r[b]]);for(let t=0;t<c;t++)S=E[h[t]],I(S)?d[t].push(S):null===S&&(d[t].hasNulls=!0)}else D=g?a[t]:null,I(D)?d[0].push(D):null===D&&(d[0].hasNulls=!0)}return{groupedXData:s,groupedYData:p,groupMap:u}}function g(t){const o=t.options,a=this.type,e=this.chart.options.plotOptions,i=this.useCommonDataGrouping&&Y.common,n=Y.seriesSpecific;let r=s.defaultOptions.plotOptions[a].dataGrouping;e&&(n[a]||i)&&(t=this.chart.rangeSelector,r=r||j(Y.common,n[a]),o.dataGrouping=j(i,r,e.series&&e.series.dataGrouping,e[a].dataGrouping,this.userOptions.dataGrouping,!o.isInternal&&t&&I(t.selected)&&t.buttonOptions[t.selected].dataGrouping))}return{compose:function(t){var o,a=t.prototype;a.applyGrouping||(o=t.prototype.pointClass,e(o,"update",function(){if(this.dataGroup)return R(24,!1,this.series.chart),!1}),e(t,"afterSetOptions",g),e(t,"destroy",r),i(a,{applyGrouping:n,destroyGroupedData:r,generatePoints:p,getDGApproximation:u,groupData:l}))},groupData:l}}),o(t,"Extensions/DataGrouping/DataGrouping.js",[t["Extensions/DataGrouping/DataGroupingAxisComposition.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Extensions/DataGrouping/DataGroupingSeriesComposition.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,G,i,t,o,a){const y=t["format"],n=o["composed"],{addEvent:r,extend:M,isNumber:A,pick:v,pushUnique:s}=a;function p(t){const o=this.chart,a=o.time,e=t.labelConfig,i=e.series,n=e.point,r=i.options,s=i.tooltipOptions,p=r.dataGrouping,u=i.xAxis;let l=s.xDateFormat,g,d,h,c,m,f=s[t.isFooter?"footerFormat":"headerFormat"];var x,D;u&&"datetime"===u.options.type&&p&&A(e.key)&&(d=i.currentDataGrouping,h=p.dateTimeLabelFormats||G.common.dateTimeLabelFormats,d?(c=h[d.unitName],1===d.count?l=c[0]:(l=c[1],g=c[2])):!l&&h&&u.dateTime&&(l=u.dateTime.getXDateFormat(e.x,s.dateTimeLabelFormats)),D=(x=v(i.groupMap?.[n.index].groupStart,e.key))+d?.totalRange-1,m=a.dateFormat(l,x),g&&(m+=a.dateFormat(g,D)),i.chart.styledMode&&(f=this.styledModeFormat(f)),t.text=y(f,{point:M(e.point,{key:m}),series:i},o),t.preventDefault())}return{compose:function(t,o,a){e.compose(t),i.compose(o),a&&s(n,"DataGrouping")&&r(a,"headerFormatter",p)},groupData:i.groupData}}),o(t,"masters/modules/datagrouping.src.js",[t["Core/Globals.js"],t["Extensions/DataGrouping/ApproximationDefaults.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGrouping.js"]],function(t,o,a,e){const i=t;return i.dataGrouping=i.dataGrouping||{},i.dataGrouping.approximationDefaults=i.dataGrouping.approximationDefaults||o,i.dataGrouping.approximations=i.dataGrouping.approximations||a,e.compose(i.Axis,i.Series,i.Tooltip),t})});