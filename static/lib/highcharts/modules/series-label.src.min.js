!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/series-label",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(i){"use strict";var t=i?i._modules:{};function e(t,e,o,r){t.hasOwnProperty(e)||(t[e]=r.apply(null,o),"function"==typeof CustomEvent&&i.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Extensions/SeriesLabel/SeriesLabelDefaults.js",[],function(){return{enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]}}),e(t,"Extensions/SeriesLabel/SeriesLabelUtilities.js",[],function(){function h(t,e,o,r,i,a){a=(a-e)*(o-t)-(r-e)*(i-t);return 0<a||!(a<0)}function l(t,e,o,r,i,a,n,s){return h(t,e,i,a,n,s)!==h(o,r,i,a,n,s)&&h(t,e,o,r,i,a)!==h(t,e,o,r,n,s)}return{boxIntersectLine:function(t,e,o,r,i,a,n,s){return l(t,e,t+o,e,i,a,n,s)||l(t+o,e,t+o,e+r,i,a,n,s)||l(t,e+r,t+o,e+r,i,a,n,s)||l(t,e,t,e+r,i,a,n,s)},intersectRect:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}}}),e(t,"Extensions/SeriesLabel/SeriesLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Extensions/SeriesLabel/SeriesLabelDefaults.js"],t["Extensions/SeriesLabel/SeriesLabelUtilities.js"],t["Core/Utilities.js"]],function(t,e,o,r,i,a,s){const T=t["animObject"],C=e["format"],n=o["setOptions"],h=r["composed"],{boxIntersectLine:Y,intersectRect:M}=a,{addEvent:l,extend:P,fireEvent:c,isNumber:D,pick:z,pushUnique:p,syncTimeout:d}=s,j=3;function B(t,e,o,r,i){var a=t.chart,n=t.options.label||{},s=z(n.onArea,!!t.area),h=s||n.connectorAllowed,l=a.boxesToAvoid;let c=Number.MAX_VALUE,p=Number.MAX_VALUE,d,u,f,x,b,m,g;for(m=0;l&&m<l.length;m+=1)if(M(l[m],{left:e,right:e+r.width,top:o,bottom:o+r.height}))return!1;for(m=0;m<a.series.length;m+=1){const X=a.series[m],S=X.interpolatedPoints&&[...X.interpolatedPoints];if(X.visible&&S){var y=a.plotHeight/10;for(let t=a.plotTop;t<=a.plotTop+a.plotHeight;t+=y)S.unshift({chartX:a.plotLeft,chartY:t}),S.push({chartX:a.plotLeft+a.plotWidth,chartY:t});for(g=1;g<S.length;g+=1){if(S[g].chartX>=e-16&&S[g-1].chartX<=e+r.width+16){if(Y(e,o,r.width,r.height,S[g-1].chartX,S[g-1].chartY,S[g].chartX,S[g].chartY))return!1;t===X&&!f&&i&&(f=Y(e-16,o-16,r.width+32,r.height+32,S[g-1].chartX,S[g-1].chartY,S[g].chartX,S[g].chartY))}!h&&!f||t===X&&!s||(x=e+r.width/2-S[g].chartX,b=o+r.height/2-S[g].chartY,c=Math.min(c,x*x+b*b))}if(!s&&h&&t===X&&(i&&!f||c<Math.pow(n.connectorNeighbourDistance||1,2))){for(g=1;g<S.length;g+=1)(d=Math.min(Math.pow(e+r.width/2-S[g].chartX,2)+Math.pow(o+r.height/2-S[g].chartY,2),Math.pow(e-S[g].chartX,2)+Math.pow(o-S[g].chartY,2),Math.pow(e+r.width-S[g].chartX,2)+Math.pow(o-S[g].chartY,2),Math.pow(e+r.width-S[g].chartX,2)+Math.pow(o+r.height-S[g].chartY,2),Math.pow(e-S[g].chartX,2)+Math.pow(o+r.height-S[g].chartY,2)))<p&&(p=d,u=S[g]);f=!0}}}return!(i&&!f)&&{x:e,y:o,weight:c-(u?p:0),connectorPoint:u}}function u(E){E.boxesToAvoid=[];const t=E.labelSeries||[],a=E.boxesToAvoid;E.series.forEach(i=>(i.points||[]).forEach(t=>(t.dataLabels||[]).forEach(t=>{var{width:e,height:o}=t.getBBox(),r=(t.translateX||0)+(i.xAxis?i.xAxis.pos:i.chart.plotLeft),t=(t.translateY||0)+(i.yAxis?i.yAxis.pos:i.chart.plotTop);a.push({left:r,top:t,right:r+e,bottom:t+o})}))),t.forEach(function(t){var e=t.options.label||{};t.interpolatedPoints=function(t){if(t.xAxis||t.yAxis){const p=t.points,d=[],u=t.graph||t.area,f=u&&u.element,x=t.chart.inverted,b=t.xAxis,m=t.yAxis,g=(x?m:b).pos,y=(x?b:m).pos,X=(x?b:m).len,S=(x?m:b).len,Y=t.options.label||{},M=z(Y.onArea,!!t.area),w=m.getThreshold(t.options.threshold),A={},L=x?"chartCenterX":"chartCenterY";let e,o,r,i,a,n,s;if(t.getPointSpline&&f&&f.getPointAtLength&&!M&&p.length<(t.chart.plotSizeX||0)/16){t=u.toD&&u.attr("d");for(u.toD&&u.attr({d:u.toD}),a=f.getTotalLength(),e=0;e<a;e+=16){var h=f.getPointAtLength(e),l=x?S-h.y:h.x,h=x?X-h.x:h.y;c({chartX:g+l,chartY:y+h,plotX:l,plotY:h})}t&&u.attr({d:t});const v=p[p.length-1],E=v.pos();c({chartX:g+(E?.[0]||0),chartY:y+(E?.[1]||0)})}else{a=p.length;let t;for(e=0;e<a;e+=1){const T=p[e],[C,P]=T.pos()||[],j=T["plotHigh"];if(D(C)&&D(P)){const B={plotX:C,plotY:P,chartX:g+C,chartY:y+P};if(M&&(j&&(B.plotY=j,B.chartY=y+j),x?B.chartCenterX=g+S-((j||T.plotY||0)+z(T.yBottom,w))/2:B.chartCenterY=y+((j||P)+z(T.yBottom,w))/2),t&&(o=Math.abs(B.chartX-t.chartX),r=Math.abs(B.chartY-t.chartY),16<(i=Math.max(o,r))))for(n=Math.ceil(i/16),s=1;s<n;s+=1)c({chartX:t.chartX+(B.chartX-t.chartX)*(s/n),chartY:t.chartY+(B.chartY-t.chartY)*(s/n),[L]:(t[L]||0)+((B[L]||0)-(t[L]||0))*(s/n),plotX:(t.plotX||0)+(C-(t.plotX||0))*(s/n),plotY:(t.plotY||0)+(P-(t.plotY||0))*(s/n)});c(B),t=B}}}return d;function c(t){var e=Math.round((t.plotX||0)/8)+","+Math.round((t.plotY||0)/8);A[e]||(A[e]=1,d.push(t))}}}(t),a.push(...e.boxesToAvoid||[])}),E.series.forEach(function(c){const p=c.options.label;if(p&&(c.xAxis||c.yAxis)){const x="highcharts-color-"+z(c.colorIndex,"none"),b=!c.labelBySeries,m=p.minFontSize,g=p.maxFontSize,y=E.inverted,X=(y?c.yAxis:c.xAxis).pos,S=(y?c.xAxis:c.yAxis).pos,Y=(E.inverted?c.yAxis:c.xAxis).len,M=(E.inverted?c.xAxis:c.yAxis).len,w=c.interpolatedPoints,A=z(p.onArea,!!c.area),L=[],v=c.xData||[];let t,e,o,r,i,a,n=c.labelBySeries,s,h,l;if(A&&!y&&(s=[c.xAxis.toPixels(v[0]),c.xAxis.toPixels(v[v.length-1])],h=Math.min.apply(Math,s),l=Math.max.apply(Math,s)),c.visible&&!c.boosted&&w){if(!n){let t=c.name;"string"==typeof p.format?t=C(p.format,c,E):p.formatter&&(t=p.formatter.call(c)),c.labelBySeries=n=E.renderer.label(t,0,0,"connector",0,0,p.useHTML).addClass("highcharts-series-label highcharts-series-label-"+c.index+" "+(c.options.className||"")+" "+x),E.renderer.styledMode||(d="string"==typeof c.color?c.color:"#666666",n.css(P({color:A?E.renderer.getContrast(d):d},p.style||{})),n.attr({opacity:E.renderer.forExport?1:0,stroke:c.color,"stroke-width":1})),m&&g&&n.css({fontSize:m+(c.sum||0)/(c.chart.labelSeriesMaxSum||0)*(g-m)+"px"}),n.attr({padding:0,zIndex:3}).add()}for((t=n.getBBox()).width=Math.round(t.width),i=w.length-1;0<i;--i)A?(e=(w[i].chartCenterX??w[i].chartX)-t.width/2,o=(w[i].chartCenterY??w[i].chartY)-t.height/2,(a=u(e,o,t)?B(c,e,o,t):a)&&L.push(a)):(e=w[i].chartX+j,o=w[i].chartY-t.height-j,(a=u(e,o,t)?B(c,e,o,t,!0):a)&&L.push(a),e=w[i].chartX+j,o=w[i].chartY+j,(a=u(e,o,t)?B(c,e,o,t,!0):a)&&L.push(a),e=w[i].chartX-t.width-j,o=w[i].chartY+j,(a=u(e,o,t)?B(c,e,o,t,!0):a)&&L.push(a),e=w[i].chartX-t.width-j,o=w[i].chartY-t.height-j,(a=u(e,o,t)?B(c,e,o,t,!0):a)&&L.push(a));if(p.connectorAllowed&&!L.length&&!A)for(e=X+Y-t.width;e>=X;e-=16)for(o=S;o<S+M-t.height;o+=16)(r=B(c,e,o,t,!0))&&L.push(r);if(L.length){L.sort((t,e)=>e.weight-t.weight),a=L[0],(E.boxesToAvoid||[]).push({left:a.x,right:a.x+t.width,top:a.y,bottom:a.y+t.height});var d=Math.sqrt(Math.pow(Math.abs(a.x-(n.x||0)),2)+Math.pow(Math.abs(a.y-(n.y||0)),2));if(d&&c.labelBySeries){let t={opacity:E.renderer.forExport?1:0,x:a.x,y:a.y},e={opacity:1};d<=10&&(e={x:t.x,y:t.y},t={});let o;b&&((o=T(c.options.animation)).duration*=.2),c.labelBySeries.attr(P(t,{anchorX:a.connectorPoint&&(a.connectorPoint.plotX||0)+X,anchorY:a.connectorPoint&&(a.connectorPoint.plotY||0)+S})).animate(e,o),c.options.kdNow=!0,c.buildKDTree();d=c.searchPoint({chartX:a.x,chartY:a.y},!0);d&&(n.closest=[d,a.x-(d.plotX||0),a.y-(d.plotY||0)])}}else f()}else f();function u(t,e,o){var r=Math.max(X,z(h,-1/0)),i=Math.min(X+Y,z(l,1/0));return r<t&&t<=i-o.width&&e>=S&&e<=S+M-o.height}function f(){n&&(c.labelBySeries=n.destroy())}}}),c(E,"afterDrawSeriesLabels")}function f(a){if(this.renderer){const n=this;let i=T(n.renderer.globalAnimation).duration;n.labelSeries=[],n.labelSeriesMaxSum=0,n.seriesLabelTimer&&s.clearTimeout(n.seriesLabelTimer),n.series.forEach(function(t){const e=t.options.label||{},o=t.labelBySeries,r=o&&o.closest;e.enabled&&t.visible&&(t.graph||t.area)&&!t.boosted&&n.labelSeries&&(n.labelSeries.push(t),e.minFontSize&&e.maxFontSize&&t.yData&&(t.sum=t.yData.reduce((t,e)=>(t||0)+(e||0),0),n.labelSeriesMaxSum=Math.max(n.labelSeriesMaxSum||0,t.sum||0)),"load"===a.type&&(i=Math.max(i,T(t.options.animation).duration)),r&&(void 0!==r[0].plotX?o.animate({x:r[0].plotX+r[1],y:r[0].plotY+r[2]}):o.attr({opacity:0})))}),n.seriesLabelTimer=d(function(){n.series&&n.labelSeries&&u(n)},n.renderer.forExport||!i?0:i)}}function x(t,e,o,r,i){var a=i&&i.anchorX,i=i&&i.anchorY;let n,s,h=o/2;return D(a)&&D(i)&&(n=[["M",a,i]],(s=(s=e-i)<0?-r-s:s)<o&&(h=a<t+o/2?s:o-s),e+r<i?n.push(["L",t+h,e+r]):i<e?n.push(["L",t+h,e]):a<t?n.push(["L",t,e+r/2]):t+o<a&&n.push(["L",t+o,e+r/2])),n||[]}return{compose:function(t,e){p(h,"SeriesLabel")&&(l(t,"load",f),l(t,"redraw",f),e.prototype.symbols.connector=x,n({plotOptions:{series:{label:i}}}))}}}),e(t,"masters/modules/series-label.src.js",[t["Core/Globals.js"],t["Extensions/SeriesLabel/SeriesLabel.js"]],function(t,e){return e.compose(t.Chart,t.SVGRenderer),t})});