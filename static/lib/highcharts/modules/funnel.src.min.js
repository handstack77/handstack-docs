!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(n){"use strict";var e=n?n._modules:{};function t(e,t,i,s){e.hasOwnProperty(t)||(e[t]=s.apply(null,i),"function"==typeof CustomEvent&&n.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/Funnel/FunnelSeriesDefaults.js",[],function(){return{animation:!1,borderRadius:0,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}}}),t(e,"Series/Funnel/FunnelSeries.js",[e["Series/Funnel/FunnelSeriesDefaults.js"],e["Core/Globals.js"],e["Extensions/BorderRadius.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,X,i,s){const{composed:n,noop:U}=t,{column:a,pie:d}=i.seriesTypes,{addEvent:o,correctFloat:q,extend:r,fireEvent:G,isArray:l,merge:h,pick:N,pushUnique:c,relativeLength:V,splat:u}=s,L=i.series.prototype.alignDataLabel;function z(e,t){return/%$/.test(e)?t*parseInt(e,10)/100:parseInt(e,10)}class p extends d{alignDataLabel(e,t,i,s,n){const a=e.series,d=a.options.reversed,o=e.dlBox||e.shapeArgs,{align:r,padding:l=0,verticalAlign:h}=i,c=((a.options||{}).dataLabels||{}).inside,u=a.center[1],p=e.plotY||0,y=d?2*u-p:p,g=t.height??t.getBBox().height,f=a.getWidthAt(y-o.height/2+g),x="middle"===h?(o.topWidth-o.bottomWidth)/4:(f-o.bottomWidth)/2;let m=o.y,b=o.x;"middle"===h?m=o.y-o.height/2+g/2:"top"===h&&(m=o.y-o.height+g+l),("top"===h&&!d||"bottom"===h&&d||"middle"===h)&&("right"===r?b=o.x-l+x:"left"===r&&(b=o.x+l-x)),s={x:b,y:d?m-o.height:m,width:o.bottomWidth,height:o.height},i.verticalAlign="bottom",c&&(i.distance=void 0),c&&e.visible&&L.call(a,e,t,i,s,n),c&&(!e.visible&&e.dataLabel&&(e.dataLabel.placed=!1),e.contrastColor&&t.css({color:e.contrastColor}))}drawDataLabels(){(u(this.options.dataLabels)[0].inside?a:d).prototype.drawDataLabels.call(this)}getDataLabelPosition(e,t){var i=e.plotY||0,s=e.half?1:-1,n=this.getX(i,!!e.half,e);return{distance:t,natural:{x:0,y:i},computed:{},alignment:e.half?"right":"left",connectorPosition:{breakAt:{x:n+(t-5)*s,y:i},touchingSliceAt:{x:n+t*s,y:i}}}}translate(){const s=this,e=s.chart,t=s.options,o=t.reversed,i=t.ignoreHiddenPoint,n=X.optionsToObject(t.borderRadius),a=e.plotWidth,d=e.plotHeight,B=t.center,r=z(B[0],a),l=z(B[1],d),h=z(t.width,a),c=z(t.height,d),u=z(t.neckWidth,a),p=z(t.neckHeight,d),y=l-c/2+c-p,g=s.points,E=V(n.radius,h),f=n.scope,T="left"===t.dataLabels.position?1:0,x=e=>{var t=Math.tan(e/2),i=Math.cos(S),s=Math.sin(S);let n=E,a=n/t,d=Math.tan((Math.PI-e)/3.2104);return a>C&&(a=C,n=a*t),d*=n,{dx:[a*i,(a-d)*i,a-d,a],dy:[a*s,(a-d)*s,a-d,a].map(e=>o?-e:e)}};let m=0,Y=0,b,L,v,S,C,M,j,P,W,A,F,k;s.getWidthAt=function(e){var t=l-c/2;return e>y||c===p?u:u+(h-u)*(1-(e-t)/(c-p))},s.getX=function(e,t,i){return r+(t?-1:1)*(s.getWidthAt(o?2*l-e:e)/2+(i.dataLabel?.dataLabelPosition?.distance??V(this.options.dataLabels?.distance||0,h)))},s.center=[r,l,c],s.centerX=r;for(const I of g)!I.y||!I.isValid()||i&&!1===I.visible||(m+=I.y);for(const O of g){if(k=null,v=m?O.y/m:0,j=l-c/2+Y*c,A=j+v*c,b=s.getWidthAt(j),M=r-b/2,P=M+b,b=s.getWidthAt(A),W=r-b/2,F=W+b,q(j)>=y?(M=W=r-u/2,P=F=r+u/2):A>y&&(k=A,b=s.getWidthAt(y),W=r-b/2,F=W+b,A=y),o&&(j=2*l-j,A=2*l-A,null!==k&&(k=2*l-k)),!E||"point"!==f&&0!==O.index&&O.index!==g.length-1&&null===k)L=[["M",M,j],["L",P,j],["L",F,A]],null!==k&&L.push(["L",F,k],["L",W,k]),L.push(["L",W,A]);else{var D=Math.abs(A-j),H=P-F,w=F-W,R=Math.sqrt(H*H+D*D);S=Math.atan(0!=H?D/H:1/0),C=R/2,null!==k&&(C=Math.min(C,Math.abs(k-A)/2)),1<=w&&(C=Math.min(C,w/2));let e=x(S);L="stack"===f&&0!==O.index?[["M",M,j],["L",P,j]]:[["M",M+e.dx[0],j+e.dy[0]],["C",M+e.dx[1],j+e.dy[1],M+e.dx[2],j,M+e.dx[3],j],["L",P-e.dx[3],j],["C",P-e.dx[2],j,P-e.dx[1],j+e.dy[1],P-e.dx[0],j+e.dy[0]]],null!==k?(D=x(Math.PI/2),e=x(Math.PI/2+S),L.push(["L",F+e.dx[0],A-e.dy[0]],["C",F+e.dx[1],A-e.dy[1],F,A+e.dy[2],F,A+e.dy[3]]),"stack"===f&&O.index!==g.length-1?L.push(["L",F,k],["L",W,k]):L.push(["L",F,k-D.dy[3]],["C",F,k-D.dy[2],F-D.dx[2],k,F-D.dx[3],k],["L",W+D.dx[3],k],["C",W+D.dx[2],k,W,k-D.dy[2],W,k-D.dy[3]]),L.push(["L",W,A+e.dy[3]],["C",W,A+e.dy[2],W-e.dx[1],A-e.dy[1],W-e.dx[0],A-e.dy[0]])):1<=w?(e=x(Math.PI-S),"stack"===f&&0===O.index?L.push(["L",F,A],["L",W,A]):L.push(["L",F+e.dx[0],A-e.dy[0]],["C",F+e.dx[1],A-e.dy[1],F-e.dx[2],A,F-e.dx[3],A],["L",W+e.dx[3],A],["C",W+e.dx[2],A,W-e.dx[1],A-e.dy[1],W-e.dx[0],A-e.dy[0]])):(e=x(Math.PI-2*S),L.push(["L",W+e.dx[0],A-e.dy[0]],["C",W+e.dx[1],A-e.dy[1],W-e.dx[1],A-e.dy[1],W-e.dx[0],A-e.dy[0]]))}L.push(["Z"]),O.shapeType="path",O.shapeArgs={d:L},O.percentage=100*v,O.plotX=r,O.plotY=(j+(k||A))/2,O.tooltipPos=[r,O.plotY],O.dlBox={x:W,y:j,topWidth:P-M,bottomWidth:F-W,height:Math.abs(N(k,A)-j),width:NaN},O.slice=U,O.half=T,!O.isValid()||i&&!1===O.visible||(Y+=v)}G(s,"afterTranslate")}sortByAngle(e){e.sort((e,t)=>e.plotY-t.plotY)}}function y(){for(const t of this.series){let e=t.options&&t.options.dataLabels;l(e)&&(e=e[0]),t.is("pie")&&t.placeDataLabels&&e&&!e.inside&&t.placeDataLabels()}}return p.defaultOptions=h(d.defaultOptions,e),r(p.prototype,{animate:U}),(p||(p={})).compose=function(e){c(n,"FunnelSeries")&&o(e,"afterHideAllOverlappingLabels",y)},i.registerSeriesType("funnel",p),p}),t(e,"Series/Pyramid/PyramidSeriesDefaults.js",[],function(){return{neckHeight:"0%",neckWidth:"0%",reversed:!0}}),t(e,"Series/Pyramid/PyramidSeries.js",[e["Series/Funnel/FunnelSeries.js"],e["Series/Pyramid/PyramidSeriesDefaults.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,i,s){const n=s["merge"];class a extends e{}return a.defaultOptions=n(e.defaultOptions,t),i.registerSeriesType("pyramid",a),a}),t(e,"masters/modules/funnel.src.js",[e["Core/Globals.js"],e["Series/Funnel/FunnelSeries.js"]],function(e,t){return t.compose(e.Chart),e})});