---
sidebar_position: 80
---

# openapi

데이터베이스 데이터를 Open API로 제공 하기 위한 기능을 제공하는 모듈입니다. 외부 시스템과 연동을 위해 API 서비스 관리, 서비스 키 발급, 접근 권한 제어, API 사용 통계 등의 기능을 제공합니다.

## 주요 기능

* API 서비스 관리
* 회원 정보 관리
* 서비스 키 발급
* 접근 권한 제어
* API 메타 정보 캐시 관리
* 로깅 및 거래 횟수 업데이트
* 거래 제한 조건 적용
* Json, Xml, Soap, Rss/Atom 출력 포맷 지원
* 필수 매개변수 및 기본 매개변수 적용 확인
* 공개, 비밀 키, IP 주소 접근 제어
* 기간 내 호출 수 제한 및 제한 조건 일별/월별 자동 갱신
* 응답 결과 캐싱
* 시간 단위 API 사용 통계
* SqlServer, Oracle, MySQL, PostgreSQL, SQLite 데이터베이스 지원

```json
{
    "ModuleID": "openapi",
    "Name": "openapi",
    "IsBundledWithHost": false,
    "Version": "1.0.0",
    "ModuleConfig": {
        "SystemID": "HANDSTACK",
        "ManagedAccessKey": "",
        "ModuleBasePath": "../modules/openapi",
        "ManagerEmailID": "",
        "ManagerSHA256Password": "",
        "ModuleConfigurationUrl": "http://localhost:8000/openapi/api/managed/initialize-settings",
        "BusinessServerUrl": "http://localhost:8000/transact/api/transaction/execute",
        "IsTransactionLogging": false,
        "ModuleLogFilePath": "../log/openapi/module.log",
        "IsLogServer": true,
        "LogServerUrl": "http://localhost:8000/logger/api/log/insert",
        "DataSource": {
            "ApplicationID": "HDS",
            "ProjectID": "HOA",
            "DataSourceID": "OPENAPIDB",
            "DataProvider": "SQLite",
            "ConnectionString": "URI=file:../sqlite/HDS/openapi/managed.db;Journal Mode=MEMORY;Cache Size=4000;Synchronous=Normal;Page Size=4096;Pooling=True;BinaryGUID=False;DateTimeFormat=Ticks;Version=3;",
            "IsEncryption": "N"
        },
        "EventAction": [
            "dbclient.Events.ManagedRequest"
        ],
        "SubscribeAction": []
    }
}
```
소스) openapi 환경설정 예제

## 옵션 설명

### SystemID

운영중인 프로그램의 시스템의 ID를 설정합니다. 거래 요청시 동일한 시스템에서 운영중인지 식별하는데 사용되며 서버에 요청할 때 헤더와 본문에 사용됩니다. 다른 값으로 변경하려면 ack 프로그램의 app.settings.json 그리고 각 모듈의 module.json 내 SystemID와 동일하게 변경해야합니다.

### ManagedAccessKey

관리 목적의 서버에 요청이 있을 경우 검증하기 위한 확인 용도로 사용되며 헤더와 본문에 사용됩니다.

### ManagerEmailID

openapi 모듈을 포함하는 프로그램 실행시 담당자 계정으로 사용할 이메일 주소로 사용됩니다.

### ManagerSHA256Password

담당자 로그인을 위한 암호화를 위한 키로 사용됩니다.

### ModuleConfigurationUrl

프로그램 실행시 openapi 모듈의 설정을 초기화하기 위한 URL로 사용됩니다.

### BusinessServerUrl

module 내에서 transact 거래 요청시 사용되는 URL를 설정합니다.

### IsLogServer

로그 서버를 사용할지 여부를 설정합니다.

### LogServerUrl

로그 서버를 사용할 경우 로그 서버의 URL을 설정합니다.

### DataSource

업무에 사용 하는 데이터베이스 연결 문자열을 설정합니다.

### ModuleLogFilePath

로그를 남길 파일의 경로를 설정합니다.

### ModuleBasePath

openapi 모듈의 기본 경로를 설정합니다.

### EventAction

파일 저장소 액션 이벤트가 발생했을 때 실행할 이벤트 핸들러를 설정합니다.

### SubscribeAction

구독할 이벤트 핸들러를 설정합니다.